2023-07-21 08:51:29.470 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 08:51:29.618 -05:00 [DBG] Hosting starting
2023-07-21 08:51:29.673 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 08:51:29.676 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 08:51:29.683 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 08:51:29.690 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 08:51:29.695 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 08:51:29.703 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 08:51:29.705 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:51:29.708 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 08:51:29.710 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:51:29.715 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 08:51:29.717 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 08:51:29.720 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 08:51:29.721 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 08:51:29.929 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 08:51:29.996 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 08:51:29.996 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 08:51:29.997 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 08:51:29.997 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 08:51:29.998 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 08:51:29.998 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 08:51:29.999 -05:00 [INF] Hosting environment: Development
2023-07-21 08:51:29.999 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 08:51:30.000 -05:00 [DBG] Hosting started
2023-07-21 08:51:30.302 -05:00 [DBG] Connection id "0HMS9U6B33EE1" received FIN.
2023-07-21 08:51:30.302 -05:00 [DBG] Connection id "0HMS9U6B33EE2" received FIN.
2023-07-21 08:51:30.304 -05:00 [DBG] Connection id "0HMS9U6B33EE1" accepted.
2023-07-21 08:51:30.304 -05:00 [DBG] Connection id "0HMS9U6B33EE2" accepted.
2023-07-21 08:51:30.306 -05:00 [DBG] Connection id "0HMS9U6B33EE1" started.
2023-07-21 08:51:30.306 -05:00 [DBG] Connection id "0HMS9U6B33EE2" started.
2023-07-21 08:51:30.320 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:51:30.320 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:51:30.392 -05:00 [DBG] Connection id "0HMS9U6B33EE2" stopped.
2023-07-21 08:51:30.392 -05:00 [DBG] Connection id "0HMS9U6B33EE1" stopped.
2023-07-21 08:51:30.395 -05:00 [DBG] Connection id "0HMS9U6B33EE2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:51:30.395 -05:00 [DBG] Connection id "0HMS9U6B33EE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:51:31.420 -05:00 [DBG] Connection id "0HMS9U6B33EE3" accepted.
2023-07-21 08:51:31.422 -05:00 [DBG] Connection id "0HMS9U6B33EE3" started.
2023-07-21 08:51:31.498 -05:00 [DBG] Connection 0HMS9U6B33EE3 established using the following protocol: "Tls12"
2023-07-21 08:51:31.540 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 08:51:31.569 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 08:51:31.694 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 08:51:31.890 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 08:51:31.890 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 08:51:31.891 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 08:51:31.897 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 361.0632ms
2023-07-21 08:51:31.897 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 5.9112ms
2023-07-21 08:51:31.913 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.1177ms
2023-07-21 08:51:31.989 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 08:51:32.156 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 166.6997ms
2023-07-21 08:51:49.089 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 08:51:49.092 -05:00 [DBG] POST requests are not supported
2023-07-21 08:51:49.114 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 08:51:49.117 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 08:51:49.128 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 08:51:49.228 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 08:51:49.231 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 08:51:49.248 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 08:51:49.250 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:51:49.251 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:51:49.252 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:51:49.253 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:51:49.254 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:51:49.255 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 08:51:49.256 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 08:51:49.259 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 08:51:49.262 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 08:51:49.263 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 08:51:49.263 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 08:51:49.271 -05:00 [DBG] Connection id "0HMS9U6B33EE3", Request id "0HMS9U6B33EE3:00000009": started reading request body.
2023-07-21 08:51:49.272 -05:00 [DBG] Connection id "0HMS9U6B33EE3", Request id "0HMS9U6B33EE3:00000009": done reading request body.
2023-07-21 08:51:49.430 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 08:51:49.431 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 08:51:49.432 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 08:51:49.438 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 08:51:49.511 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:51:49.617 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.9183ms.
2023-07-21 08:51:49.622 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:51:49.626 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 08:51:49.628 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 08:51:49.628 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 08:51:49.660 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 400.7689ms
2023-07-21 08:51:49.661 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 08:51:49.662 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 289 application/json;+charset=utf-8 572.9815ms
2023-07-21 08:52:02.970 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 48
2023-07-21 08:52:02.971 -05:00 [DBG] POST requests are not supported
2023-07-21 08:52:02.972 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 08:52:02.973 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 08:52:02.974 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 08:52:02.975 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 08:52:02.975 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 08:52:02.977 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 08:52:02.979 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:52:02.980 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:52:02.981 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:52:02.982 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:52:02.982 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:52:02.983 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 08:52:02.984 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 08:52:02.984 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 08:52:02.986 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 08:52:02.988 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 08:52:02.988 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 08:52:02.989 -05:00 [DBG] Connection id "0HMS9U6B33EE3", Request id "0HMS9U6B33EE3:0000000B": started reading request body.
2023-07-21 08:52:02.989 -05:00 [DBG] Connection id "0HMS9U6B33EE3", Request id "0HMS9U6B33EE3:0000000B": done reading request body.
2023-07-21 08:52:02.990 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 08:52:02.991 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 08:52:02.991 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 08:52:02.992 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 08:52:03.005 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:52:03.006 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.1442ms.
2023-07-21 08:52:03.007 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:52:03.008 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 08:52:03.009 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 08:52:03.009 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 08:52:03.011 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 27.4754ms
2023-07-21 08:52:03.012 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 08:52:03.012 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 48 - 200 289 application/json;+charset=utf-8 42.0674ms
2023-07-21 08:52:20.220 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities?pageNumber=1&pageSize=10 - -
2023-07-21 08:52:20.221 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:52:20.222 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2023-07-21 08:52:20.225 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2023-07-21 08:52:20.227 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 08:52:20.301 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:52:20.302 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:52:20.306 -05:00 [DBG] Authorization was successful.
2023-07-21 08:52:20.308 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 08:52:20.316 -05:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-07-21 08:52:20.317 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:52:20.317 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:52:20.318 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:52:20.319 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:52:20.320 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:52:20.321 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 08:52:20.454 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 08:52:20.605 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 08:52:20.609 -05:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-07-21 08:52:20.610 -05:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-07-21 08:52:20.612 -05:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-07-21 08:52:20.613 -05:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-07-21 08:52:20.613 -05:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-07-21 08:52:20.614 -05:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-07-21 08:52:20.615 -05:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-07-21 08:52:20.615 -05:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-07-21 08:52:20.616 -05:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-07-21 08:52:20.616 -05:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:20.617 -05:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:20.619 -05:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:20.620 -05:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-07-21 08:52:20.620 -05:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:20.621 -05:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-07-21 08:52:20.621 -05:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-07-21 08:52:20.622 -05:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 08:52:20.623 -05:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 08:52:20.624 -05:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-07-21 08:52:20.624 -05:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 08:52:20.625 -05:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-07-21 08:52:20.626 -05:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-07-21 08:52:20.626 -05:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-07-21 08:52:20.627 -05:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-07-21 08:52:20.628 -05:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-07-21 08:52:20.628 -05:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-07-21 08:52:20.644 -05:00 [INF] Executing action method CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:52:21.344 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 08:52:21.384 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-07-21 08:52:21.598 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 08:52:21.640 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:52:21.742 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (99ms).
2023-07-21 08:52:21.751 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:21.769 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:21.778 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-07-21 08:52:21.804 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-07-21 08:52:21.815 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:52:21.821 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:21.826 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:21.836 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-07-21 08:52:21.895 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-07-21 08:52:21.905 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:52:21.906 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 08:52:21.909 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:21.909 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:21.913 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-07-21 08:52:21.918 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-07-21 08:52:21.934 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:52:21.953 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:52:21.954 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:52:21.955 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:52:21.955 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:21.956 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:21.972 -05:00 [INF] Executed action method CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1327.0701ms.
2023-07-21 08:52:21.973 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:52:21.974 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-07-21 08:52:21.975 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-07-21 08:52:21.975 -05:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-07-21 08:52:21.976 -05:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1654.9344ms
2023-07-21 08:52:21.977 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 08:52:21.981 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 08:52:21.985 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities?pageNumber=1&pageSize=10 - - - 406 0 - 1765.4616ms
2023-07-21 08:52:45.779 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities?pageNumber=1&pageSize=10 - -
2023-07-21 08:52:45.794 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:52:45.794 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities'
2023-07-21 08:52:45.795 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v1/cities'
2023-07-21 08:52:45.796 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 08:52:45.797 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:52:45.797 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:52:45.798 -05:00 [DBG] Authorization was successful.
2023-07-21 08:52:45.798 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 08:52:45.799 -05:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-07-21 08:52:45.799 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:52:45.800 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:52:45.801 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:52:45.802 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:52:45.803 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:52:45.804 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 08:52:45.810 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 08:52:45.811 -05:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-07-21 08:52:45.812 -05:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-07-21 08:52:45.812 -05:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-07-21 08:52:45.813 -05:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-07-21 08:52:45.814 -05:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-07-21 08:52:45.814 -05:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-07-21 08:52:45.815 -05:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-07-21 08:52:45.815 -05:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-07-21 08:52:45.816 -05:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-07-21 08:52:45.817 -05:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:45.817 -05:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:45.818 -05:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:45.818 -05:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-07-21 08:52:45.819 -05:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-07-21 08:52:45.820 -05:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-07-21 08:52:45.821 -05:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-07-21 08:52:45.821 -05:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 08:52:45.822 -05:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 08:52:45.822 -05:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-07-21 08:52:45.823 -05:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 08:52:45.823 -05:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-07-21 08:52:45.825 -05:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-07-21 08:52:45.826 -05:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-07-21 08:52:45.826 -05:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-07-21 08:52:45.827 -05:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-07-21 08:52:45.828 -05:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-07-21 08:52:45.842 -05:00 [INF] Executing action method CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:52:45.850 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 08:52:45.852 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:52:45.853 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 08:52:45.853 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:45.854 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:45.855 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-07-21 08:52:45.856 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-07-21 08:52:45.857 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:52:45.858 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:45.858 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:45.860 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:52:45.861 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 08:52:45.861 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:45.862 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:45.863 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-07-21 08:52:45.864 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-07-21 08:52:45.865 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:52:45.865 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:52:45.866 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:52:45.867 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:52:45.867 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:52:45.868 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:52:45.868 -05:00 [INF] Executed action method CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.0358ms.
2023-07-21 08:52:45.869 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:52:45.871 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 08:52:45.872 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 08:52:45.872 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 08:52:45.892 -05:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 88.5794ms
2023-07-21 08:52:45.899 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 08:52:45.899 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 08:52:45.900 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities?pageNumber=1&pageSize=10 - - - 200 247 application/json;+charset=utf-8 120.5276ms
2023-07-21 08:53:12.932 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities/1?includePointsOfInterest=true - -
2023-07-21 08:53:12.932 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:53:12.933 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities/1'
2023-07-21 08:53:12.934 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{id}' is valid for the request path '/api/v1/cities/1'
2023-07-21 08:53:12.935 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-07-21 08:53:12.935 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:53:12.937 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:53:12.938 -05:00 [DBG] Authorization was successful.
2023-07-21 08:53:12.939 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-07-21 08:53:12.942 -05:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-07-21 08:53:12.943 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:53:12.944 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:53:12.945 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:53:12.946 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:53:12.947 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:53:12.948 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 08:53:12.950 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 08:53:12.951 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-07-21 08:53:12.952 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-07-21 08:53:12.953 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-07-21 08:53:12.954 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-07-21 08:53:12.955 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-07-21 08:53:12.956 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-07-21 08:53:12.957 -05:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-07-21 08:53:12.958 -05:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-07-21 08:53:12.959 -05:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-07-21 08:53:12.960 -05:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-07-21 08:53:12.960 -05:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-07-21 08:53:12.961 -05:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-07-21 08:53:12.976 -05:00 [INF] Executing action method CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:53:13.015 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 08:53:13.023 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-07-21 08:53:13.042 -05:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2023-07-21 08:53:13.142 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 08:53:13.155 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:53:13.156 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 08:53:13.157 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:53:13.157 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:53:13.158 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-07-21 08:53:13.159 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-07-21 08:53:13.160 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:53:13.168 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:53:13.184 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 08:53:13.184 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:53:13.186 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:53:13.189 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:53:13.192 -05:00 [INF] Executed action method CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 216.1737ms.
2023-07-21 08:53:13.193 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:53:13.195 -05:00 [DBG] No information found on request to perform content negotiation.
2023-07-21 08:53:13.195 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-07-21 08:53:13.196 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-07-21 08:53:13.197 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 08:53:13.197 -05:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-07-21 08:53:13.201 -05:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 253.0824ms
2023-07-21 08:53:13.202 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-07-21 08:53:13.203 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 08:53:13.203 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities/1?includePointsOfInterest=true - - - 200 331 application/json;+charset=utf-8 271.4948ms
2023-07-21 08:54:12.630 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/files/1 - -
2023-07-21 08:54:12.649 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:54:12.649 -05:00 [DBG] 1 candidate(s) found for the request path '/api/files/1'
2023-07-21 08:54:12.650 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API)' with route pattern 'api/files/{fileId}' is valid for the request path '/api/files/1'
2023-07-21 08:54:12.651 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API)'
2023-07-21 08:54:12.651 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:54:12.652 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:54:12.652 -05:00 [DBG] Authorization was successful.
2023-07-21 08:54:12.653 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API)'
2023-07-21 08:54:12.654 -05:00 [INF] Route matched with {action = "GetFile", controller = "Files"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult GetFile() on controller CityInfo.API.Controllers.FilesController (CityInfo.API).
2023-07-21 08:54:12.655 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:54:12.656 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:54:12.656 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:54:12.658 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:54:12.658 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:54:12.659 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.FilesController (CityInfo.API)
2023-07-21 08:54:12.660 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.FilesController (CityInfo.API)
2023-07-21 08:54:12.676 -05:00 [INF] Executing action method CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:54:12.685 -05:00 [INF] Executed action method CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 8.8404ms.
2023-07-21 08:54:12.686 -05:00 [INF] Executing FileContentResult, sending file with download name 'TextFile.txt' ...
2023-07-21 08:54:12.689 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2023-07-21 08:54:12.691 -05:00 [INF] Executed action CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API) in 31.8472ms
2023-07-21 08:54:12.692 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API)'
2023-07-21 08:54:12.693 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/files/1 - - - 200 10 text/plain 62.8262ms
2023-07-21 08:54:41.639 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest - -
2023-07-21 08:54:41.648 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:54:41.649 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities/1/pointsofinterest'
2023-07-21 08:54:41.649 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v1/cities/1/pointsofinterest'
2023-07-21 08:54:41.655 -05:00 [INF] Multiple candidate actions were found, but none matched the requested service API version '1'. Candidate actions: CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)
2023-07-21 08:54:41.657 -05:00 [DBG] Request matched endpoint 'null'
2023-07-21 08:54:41.658 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:54:41.658 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:54:41.659 -05:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 08:54:41.661 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:54:41.663 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-07-21 08:54:41.664 -05:00 [WRN] An error occurred while trying to create a DataContractSerializer for the type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
System.Runtime.Serialization.InvalidDataContractException: Type '<>f__AnonymousType0`1[<>f__AnonymousType1`3[System.String,System.String,<>f__AnonymousType2`1[System.String]]]' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. Alternatively, you can ensure that the type is public and has a parameterless constructor - all public members of the type will then be serialized, and no attributes will be required.
   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.ThrowInvalidDataContractException(String message, Type type)
   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(Type type)
   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(Int32 id, RuntimeTypeHandle typeHandle, Type type)
   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(Int32 id, RuntimeTypeHandle typeHandle, Type type)
   at System.Runtime.Serialization.DataContract.GetDataContract(RuntimeTypeHandle typeHandle, Type type, SerializationMode mode)
   at System.Runtime.Serialization.XsdDataContractExporter.GetRootElementName(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter.CreateSerializer(Type type)
2023-07-21 08:54:41.668 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-07-21 08:54:41.668 -05:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-07-21 08:54:41.669 -05:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 08:54:41.670 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest - - - 406 0 - 30.9118ms
2023-07-21 08:54:51.894 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest - -
2023-07-21 08:54:51.905 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:54:51.906 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities/1/pointsofinterest'
2023-07-21 08:54:51.907 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v1/cities/1/pointsofinterest'
2023-07-21 08:54:51.908 -05:00 [INF] Multiple candidate actions were found, but none matched the requested service API version '1'. Candidate actions: CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)
2023-07-21 08:54:51.909 -05:00 [DBG] Request matched endpoint 'null'
2023-07-21 08:54:51.909 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:54:51.910 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:54:51.910 -05:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 08:54:51.911 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:54:51.912 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 08:54:51.914 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 08:54:51.915 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2023-07-21 08:54:51.922 -05:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 08:54:51.923 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest - - - 400 215 application/json;+charset=utf-8 28.6351ms
2023-07-21 08:55:25.520 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest - -
2023-07-21 08:55:25.538 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:55:25.538 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities/1/pointsofinterest'
2023-07-21 08:55:25.539 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v1/cities/1/pointsofinterest'
2023-07-21 08:55:25.541 -05:00 [INF] Multiple candidate actions were found, but none matched the requested service API version '1'. Candidate actions: CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)
2023-07-21 08:55:25.542 -05:00 [DBG] Request matched endpoint 'null'
2023-07-21 08:55:25.542 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:55:25.543 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:55:25.543 -05:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 08:55:25.544 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 08:55:25.546 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 08:55:25.547 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 08:55:25.549 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2023-07-21 08:55:25.550 -05:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 08:55:25.551 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest - - - 400 215 application/json;+charset=utf-8 36.2909ms
2023-07-21 08:55:37.167 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 08:55:37.167 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:55:37.168 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 08:55:37.168 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 08:55:37.169 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 08:55:37.170 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:55:37.170 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:55:37.172 -05:00 [DBG] Authorization was successful.
2023-07-21 08:55:37.173 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 08:55:37.175 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 08:55:37.176 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:55:37.177 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:55:37.178 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:55:37.179 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:55:37.180 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:55:37.181 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 08:55:37.182 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 08:55:37.183 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 08:55:37.183 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 08:55:37.184 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 08:55:37.185 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 08:55:37.185 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 08:55:37.186 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 08:55:37.200 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:55:37.203 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 08:55:37.205 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-07-21 08:55:37.210 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 08:55:37.219 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:55:37.220 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 08:55:37.220 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:55:37.221 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:55:37.221 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 08:55:37.224 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 08:55:37.226 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:55:37.226 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:55:37.227 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:55:37.227 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 27.0921ms.
2023-07-21 08:55:37.229 -05:00 [INF] Executing ForbidResult with authentication schemes ([]).
2023-07-21 08:55:37.231 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 08:55:37.232 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 50.7319ms
2023-07-21 08:55:37.232 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 08:55:37.233 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 08:55:37.234 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 67.2923ms
2023-07-21 08:55:52.040 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 08:55:52.041 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 08:55:52.042 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 08:55:52.043 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 08:55:52.044 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 08:55:52.045 -05:00 [DBG] Successfully validated the token.
2023-07-21 08:55:52.045 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 08:55:52.046 -05:00 [DBG] Authorization was successful.
2023-07-21 08:55:52.046 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 08:55:52.047 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 08:55:52.048 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 08:55:52.049 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 08:55:52.050 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:55:52.051 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 08:55:52.051 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 08:55:52.052 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 08:55:52.053 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 08:55:52.053 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 08:55:52.054 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 08:55:52.055 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 08:55:52.055 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 08:55:52.056 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 08:55:52.057 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 08:55:52.072 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 08:55:52.073 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 08:55:52.075 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 08:55:52.076 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 08:55:52.076 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:55:52.077 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:55:52.078 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 08:55:52.079 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 08:55:52.080 -05:00 [DBG] A data reader was disposed.
2023-07-21 08:55:52.080 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 08:55:52.081 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 08:55:52.082 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 9.0628ms.
2023-07-21 08:55:52.083 -05:00 [INF] Executing ForbidResult with authentication schemes ([]).
2023-07-21 08:55:52.083 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 08:55:52.084 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 31.4867ms
2023-07-21 08:55:52.084 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 08:55:52.085 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 08:55:52.085 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 45.0499ms
2023-07-21 08:57:36.054 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 08:57:36.161 -05:00 [DBG] Hosting starting
2023-07-21 08:57:36.198 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 08:57:36.202 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 08:57:36.206 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 08:57:36.212 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 08:57:36.216 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 08:57:36.223 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 08:57:36.224 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:57:36.227 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 08:57:36.229 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:57:36.234 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 08:57:36.236 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 08:57:36.239 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 08:57:36.240 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 08:57:36.368 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 08:57:36.440 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 08:57:36.441 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 08:57:36.442 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 08:57:36.442 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 08:57:36.443 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 08:57:36.444 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 08:57:36.446 -05:00 [INF] Hosting environment: Development
2023-07-21 08:57:36.446 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 08:57:36.447 -05:00 [DBG] Hosting started
2023-07-21 08:57:36.756 -05:00 [DBG] Connection id "0HMS9U9O9RFN4" accepted.
2023-07-21 08:57:36.766 -05:00 [DBG] Connection id "0HMS9U9O9RFN4" started.
2023-07-21 08:57:36.767 -05:00 [DBG] Connection id "0HMS9U9O9RFN4" received FIN.
2023-07-21 08:57:36.780 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:57:36.821 -05:00 [DBG] Connection id "0HMS9U9O9RFN4" stopped.
2023-07-21 08:57:36.826 -05:00 [DBG] Connection id "0HMS9U9O9RFN4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:57:38.151 -05:00 [DBG] Connection id "0HMS9U9O9RFN5" accepted.
2023-07-21 08:57:38.154 -05:00 [DBG] Connection id "0HMS9U9O9RFN5" started.
2023-07-21 08:57:38.234 -05:00 [DBG] Connection 0HMS9U9O9RFN5 established using the following protocol: "Tls12"
2023-07-21 08:57:38.271 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 08:57:38.298 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 08:57:38.398 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 08:57:38.547 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 08:57:38.552 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 283.6656ms
2023-07-21 08:57:38.840 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 08:57:38.840 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 08:57:38.854 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 13.1574ms
2023-07-21 08:57:38.863 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.5096ms
2023-07-21 08:57:38.955 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 08:57:39.061 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 08:57:39.066 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 111.3451ms
2023-07-21 08:57:48.105 -05:00 [DBG] Connection id "0HMS9U9O9RFN5" received FIN.
2023-07-21 08:57:48.114 -05:00 [DBG] Connection id "0HMS9U9O9RFN5" is closed. The last processed stream ID was 7.
2023-07-21 08:57:48.116 -05:00 [DBG] Connection id "0HMS9U9O9RFN5" sending FIN because: "The client closed the connection."
2023-07-21 08:57:48.126 -05:00 [DBG] Connection id "0HMS9U9O9RFN5" stopped.
2023-07-21 08:58:04.568 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 08:58:04.692 -05:00 [DBG] Hosting starting
2023-07-21 08:58:04.730 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 08:58:04.733 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 08:58:04.737 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 08:58:04.741 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 08:58:04.745 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 08:58:04.752 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 08:58:04.754 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:58:04.757 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 08:58:04.762 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:58:04.767 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 08:58:04.770 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 08:58:04.775 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 08:58:04.778 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 08:58:04.941 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 08:58:05.024 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 08:58:05.025 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 08:58:05.025 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 08:58:05.026 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 08:58:05.027 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 08:58:05.027 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 08:58:05.028 -05:00 [INF] Hosting environment: Development
2023-07-21 08:58:05.029 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 08:58:05.030 -05:00 [DBG] Hosting started
2023-07-21 08:58:05.427 -05:00 [DBG] Connection id "0HMS9UA0R93IG" accepted.
2023-07-21 08:58:05.427 -05:00 [DBG] Connection id "0HMS9UA0R93IF" accepted.
2023-07-21 08:58:05.434 -05:00 [DBG] Connection id "0HMS9UA0R93IF" started.
2023-07-21 08:58:05.434 -05:00 [DBG] Connection id "0HMS9UA0R93IG" started.
2023-07-21 08:58:05.437 -05:00 [DBG] Connection id "0HMS9UA0R93IF" received FIN.
2023-07-21 08:58:05.437 -05:00 [DBG] Connection id "0HMS9UA0R93IG" received FIN.
2023-07-21 08:58:05.449 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:58:05.449 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:58:05.486 -05:00 [DBG] Connection id "0HMS9UA0R93IF" stopped.
2023-07-21 08:58:05.486 -05:00 [DBG] Connection id "0HMS9UA0R93IG" stopped.
2023-07-21 08:58:05.488 -05:00 [DBG] Connection id "0HMS9UA0R93IF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:58:05.488 -05:00 [DBG] Connection id "0HMS9UA0R93IG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:58:07.422 -05:00 [DBG] Connection id "0HMS9UA0R93IH" accepted.
2023-07-21 08:58:07.434 -05:00 [DBG] Connection id "0HMS9UA0R93IH" started.
2023-07-21 08:58:07.517 -05:00 [DBG] Connection 0HMS9UA0R93IH established using the following protocol: "Tls12"
2023-07-21 08:58:07.553 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 08:58:07.579 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 08:58:07.670 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 08:58:07.803 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 08:58:07.807 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 256.6587ms
2023-07-21 08:58:08.123 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 08:58:08.124 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 08:58:08.144 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 20.5939ms
2023-07-21 08:58:08.168 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 44.1072ms
2023-07-21 08:58:08.256 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 08:58:08.394 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - CityInfo.API.Controllers.FilesController.GetFile (CityInfo.API). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 08:58:08.402 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 145.8898ms
2023-07-21 08:58:10.389 -05:00 [DBG] Connection id "0HMS9UA0R93IH" received FIN.
2023-07-21 08:58:10.408 -05:00 [DBG] Connection id "0HMS9UA0R93IH" is closed. The last processed stream ID was 7.
2023-07-21 08:58:10.412 -05:00 [DBG] Connection id "0HMS9UA0R93IH" sending FIN because: "The client closed the connection."
2023-07-21 08:58:10.418 -05:00 [DBG] Connection id "0HMS9UA0R93IH" stopped.
2023-07-21 08:58:24.704 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 08:58:24.824 -05:00 [DBG] Hosting starting
2023-07-21 08:58:24.870 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 08:58:24.874 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 08:58:24.879 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 08:58:24.887 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 08:58:24.892 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 08:58:24.900 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 08:58:24.904 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:58:24.906 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 08:58:24.908 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 08:58:24.912 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 08:58:24.914 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 08:58:24.917 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 08:58:24.918 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 08:58:25.087 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 08:58:25.148 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 08:58:25.149 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 08:58:25.150 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 08:58:25.153 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 08:58:25.154 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 08:58:25.155 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 08:58:25.156 -05:00 [INF] Hosting environment: Development
2023-07-21 08:58:25.157 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 08:58:25.157 -05:00 [DBG] Hosting started
2023-07-21 08:58:25.267 -05:00 [DBG] Connection id "0HMS9UA6OGLKD" received FIN.
2023-07-21 08:58:25.267 -05:00 [DBG] Connection id "0HMS9UA6OGLKE" received FIN.
2023-07-21 08:58:25.276 -05:00 [DBG] Connection id "0HMS9UA6OGLKD" accepted.
2023-07-21 08:58:25.276 -05:00 [DBG] Connection id "0HMS9UA6OGLKE" accepted.
2023-07-21 08:58:25.278 -05:00 [DBG] Connection id "0HMS9UA6OGLKD" started.
2023-07-21 08:58:25.280 -05:00 [DBG] Connection id "0HMS9UA6OGLKE" started.
2023-07-21 08:58:25.295 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:58:25.295 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 08:58:25.336 -05:00 [DBG] Connection id "0HMS9UA6OGLKE" stopped.
2023-07-21 08:58:25.336 -05:00 [DBG] Connection id "0HMS9UA6OGLKD" stopped.
2023-07-21 08:58:25.348 -05:00 [DBG] Connection id "0HMS9UA6OGLKD" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:58:25.348 -05:00 [DBG] Connection id "0HMS9UA6OGLKE" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 08:58:26.430 -05:00 [DBG] Connection id "0HMS9UA6OGLKF" accepted.
2023-07-21 08:58:26.440 -05:00 [DBG] Connection id "0HMS9UA6OGLKF" started.
2023-07-21 08:58:26.536 -05:00 [DBG] Connection 0HMS9UA6OGLKF established using the following protocol: "Tls12"
2023-07-21 08:58:26.588 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 08:58:26.621 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 08:58:26.753 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 08:58:26.913 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 08:58:26.916 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 08:58:26.916 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 08:58:26.917 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 332.6046ms
2023-07-21 08:58:26.921 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 5.3986ms
2023-07-21 08:58:26.937 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.8321ms
2023-07-21 08:58:27.023 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 08:58:27.185 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 161.3118ms
2023-07-21 08:58:28.642 -05:00 [DBG] Connection id "0HMS9UA6OGLKF" received FIN.
2023-07-21 08:58:28.664 -05:00 [DBG] Connection id "0HMS9UA6OGLKF" is closed. The last processed stream ID was 7.
2023-07-21 08:58:28.669 -05:00 [DBG] Connection id "0HMS9UA6OGLKF" sending FIN because: "The client closed the connection."
2023-07-21 08:58:28.677 -05:00 [DBG] Connection id "0HMS9UA6OGLKF" stopped.
2023-07-21 09:01:26.206 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:01:26.320 -05:00 [DBG] Hosting starting
2023-07-21 09:01:26.358 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:01:26.361 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:01:26.365 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:01:26.370 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:01:26.374 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:01:26.382 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:01:26.384 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:01:26.388 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:01:26.392 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:01:26.399 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:01:26.403 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:01:26.408 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:01:26.410 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:01:26.591 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:01:26.683 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:01:26.684 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:01:26.685 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:01:26.685 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:01:26.686 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:01:26.687 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:01:26.688 -05:00 [INF] Hosting environment: Development
2023-07-21 09:01:26.688 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:01:26.689 -05:00 [DBG] Hosting started
2023-07-21 09:01:27.108 -05:00 [DBG] Connection id "0HMS9UBSULLI0" accepted.
2023-07-21 09:01:27.108 -05:00 [DBG] Connection id "0HMS9UBSULLI1" accepted.
2023-07-21 09:01:27.110 -05:00 [DBG] Connection id "0HMS9UBSULLI1" started.
2023-07-21 09:01:27.110 -05:00 [DBG] Connection id "0HMS9UBSULLI0" started.
2023-07-21 09:01:27.121 -05:00 [DBG] Connection id "0HMS9UBSULLI1" received FIN.
2023-07-21 09:01:27.121 -05:00 [DBG] Connection id "0HMS9UBSULLI0" received FIN.
2023-07-21 09:01:27.145 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:01:27.145 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:01:27.178 -05:00 [DBG] Connection id "0HMS9UBSULLI0" stopped.
2023-07-21 09:01:27.178 -05:00 [DBG] Connection id "0HMS9UBSULLI1" stopped.
2023-07-21 09:01:27.180 -05:00 [DBG] Connection id "0HMS9UBSULLI0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:01:27.180 -05:00 [DBG] Connection id "0HMS9UBSULLI1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:01:28.410 -05:00 [DBG] Connection id "0HMS9UBSULLI2" accepted.
2023-07-21 09:01:28.412 -05:00 [DBG] Connection id "0HMS9UBSULLI2" started.
2023-07-21 09:01:28.489 -05:00 [DBG] Connection 0HMS9UBSULLI2 established using the following protocol: "Tls12"
2023-07-21 09:01:28.524 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:01:28.550 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:01:28.650 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:01:28.806 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:01:28.809 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 288.7646ms
2023-07-21 09:01:29.247 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:01:29.248 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:01:29.262 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 14.4400ms
2023-07-21 09:01:29.269 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.5995ms
2023-07-21 09:01:29.356 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:01:29.523 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 166.5757ms
2023-07-21 09:01:40.181 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:01:40.184 -05:00 [DBG] POST requests are not supported
2023-07-21 09:01:40.208 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:01:40.211 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:01:40.222 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:01:40.288 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:01:40.291 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:01:40.307 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:01:40.309 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:01:40.311 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:01:40.312 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:01:40.313 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:01:40.314 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:01:40.315 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:01:40.316 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:01:40.319 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:01:40.321 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:01:40.323 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:01:40.324 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:01:40.330 -05:00 [DBG] Connection id "0HMS9UBSULLI2", Request id "0HMS9UBSULLI2:00000009": started reading request body.
2023-07-21 09:01:40.331 -05:00 [DBG] Connection id "0HMS9UBSULLI2", Request id "0HMS9UBSULLI2:00000009": done reading request body.
2023-07-21 09:01:40.449 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:01:40.450 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:01:40.451 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:01:40.457 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:01:40.527 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:01:40.627 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.5333ms.
2023-07-21 09:01:40.630 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:01:40.636 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:01:40.637 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:01:40.637 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:01:40.669 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 349.7599ms
2023-07-21 09:01:40.669 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:01:40.670 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 289 application/json;+charset=utf-8 489.3132ms
2023-07-21 09:02:01.661 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:02:01.662 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:02:01.664 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:02:01.666 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:02:01.668 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:02:01.732 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:02:01.734 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:02:01.738 -05:00 [DBG] Authorization was successful.
2023-07-21 09:02:01.740 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:02:01.750 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:02:01.751 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:02:01.752 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:02:01.753 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:02:01.755 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:02:01.757 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:02:01.758 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:02:01.869 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 09:02:02.019 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:02:02.020 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:02:02.023 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:02:02.024 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:02:02.024 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:02:02.025 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:02:02.026 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:02:02.041 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:02:02.735 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:02:02.778 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-07-21 09:02:03.018 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 09:02:03.068 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:02:03.134 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (62ms).
2023-07-21 09:02:03.147 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:02:03.162 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:02:03.177 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:02:03.211 -05:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:02:03.221 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:02:03.228 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:02:03.232 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:02:03.233 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 1191.0372ms.
2023-07-21 09:02:03.235 -05:00 [INF] Executing ForbidResult with authentication schemes ([]).
2023-07-21 09:02:03.237 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:02:03.238 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1479.7573ms
2023-07-21 09:02:03.239 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:02:03.244 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:02:03.247 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 1585.6125ms
2023-07-21 09:03:34.804 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities?pageNumber=1&pageSize=10 - -
2023-07-21 09:03:34.820 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:03:34.820 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities'
2023-07-21 09:03:34.821 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities' is valid for the request path '/api/v2/cities'
2023-07-21 09:03:34.822 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 09:03:34.823 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:03:34.824 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:03:34.825 -05:00 [DBG] Authorization was successful.
2023-07-21 09:03:34.825 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 09:03:34.830 -05:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-07-21 09:03:34.831 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:03:34.831 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:03:34.832 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:03:34.834 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:03:34.834 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:03:34.835 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 09:03:34.842 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-07-21 09:03:34.846 -05:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-07-21 09:03:34.847 -05:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-07-21 09:03:34.848 -05:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-07-21 09:03:34.849 -05:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-07-21 09:03:34.850 -05:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-07-21 09:03:34.851 -05:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-07-21 09:03:34.851 -05:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-07-21 09:03:34.852 -05:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-07-21 09:03:34.852 -05:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-07-21 09:03:34.853 -05:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-07-21 09:03:34.854 -05:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-07-21 09:03:34.854 -05:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-07-21 09:03:34.855 -05:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-07-21 09:03:34.856 -05:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-07-21 09:03:34.857 -05:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-07-21 09:03:34.857 -05:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-07-21 09:03:34.859 -05:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 09:03:34.859 -05:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 09:03:34.860 -05:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-07-21 09:03:34.860 -05:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-07-21 09:03:34.861 -05:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-07-21 09:03:34.862 -05:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-07-21 09:03:34.862 -05:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-07-21 09:03:34.863 -05:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-07-21 09:03:34.863 -05:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-07-21 09:03:34.864 -05:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-07-21 09:03:34.879 -05:00 [INF] Executing action method CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:03:34.891 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:03:34.893 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-07-21 09:03:34.903 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 09:03:34.914 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:03:34.914 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:03:34.915 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:03:34.916 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:03:34.917 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-07-21 09:03:34.918 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-07-21 09:03:34.920 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:03:34.921 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:03:34.921 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:03:34.927 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-07-21 09:03:34.961 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-07-21 09:03:34.969 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:03:34.970 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-07-21 09:03:34.971 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:03:34.972 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:03:34.972 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-07-21 09:03:34.973 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-07-21 09:03:34.988 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:03:35.006 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:03:35.007 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:03:35.008 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:03:35.009 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:03:35.009 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:03:35.026 -05:00 [INF] Executed action method CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 146.1835ms.
2023-07-21 09:03:35.028 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:03:35.030 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:03:35.030 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:03:35.031 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 09:03:35.050 -05:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 215.0561ms
2023-07-21 09:03:35.052 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-07-21 09:03:35.052 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:03:35.053 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities?pageNumber=1&pageSize=10 - - - 200 247 application/json;+charset=utf-8 249.7771ms
2023-07-21 09:04:54.609 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:04:54.718 -05:00 [DBG] Hosting starting
2023-07-21 09:04:54.755 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:04:54.758 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:04:54.762 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:04:54.766 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:04:54.770 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:04:54.777 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:04:54.778 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:04:54.780 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:04:54.782 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:04:54.786 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:04:54.788 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:04:54.792 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:04:54.793 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:04:54.928 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:04:55.003 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:04:55.004 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:04:55.004 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:04:55.006 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:04:55.021 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:04:55.022 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:04:55.022 -05:00 [INF] Hosting environment: Development
2023-07-21 09:04:55.023 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:04:55.023 -05:00 [DBG] Hosting started
2023-07-21 09:04:55.023 -05:00 [DBG] Connection id "0HMS9UDQTGUBS" received FIN.
2023-07-21 09:04:55.023 -05:00 [DBG] Connection id "0HMS9UDQTGUBR" received FIN.
2023-07-21 09:04:55.031 -05:00 [DBG] Connection id "0HMS9UDQTGUBS" accepted.
2023-07-21 09:04:55.031 -05:00 [DBG] Connection id "0HMS9UDQTGUBR" accepted.
2023-07-21 09:04:55.033 -05:00 [DBG] Connection id "0HMS9UDQTGUBS" started.
2023-07-21 09:04:55.033 -05:00 [DBG] Connection id "0HMS9UDQTGUBR" started.
2023-07-21 09:04:55.051 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:04:55.051 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:04:55.085 -05:00 [DBG] Connection id "0HMS9UDQTGUBR" stopped.
2023-07-21 09:04:55.085 -05:00 [DBG] Connection id "0HMS9UDQTGUBS" stopped.
2023-07-21 09:04:55.089 -05:00 [DBG] Connection id "0HMS9UDQTGUBR" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:04:55.089 -05:00 [DBG] Connection id "0HMS9UDQTGUBS" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:04:56.112 -05:00 [DBG] Connection id "0HMS9UDQTGUBT" accepted.
2023-07-21 09:04:56.114 -05:00 [DBG] Connection id "0HMS9UDQTGUBT" started.
2023-07-21 09:04:56.196 -05:00 [DBG] Connection 0HMS9UDQTGUBT established using the following protocol: "Tls12"
2023-07-21 09:04:56.240 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:04:56.267 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:04:56.365 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:04:56.519 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:04:56.525 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:04:56.525 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:04:56.525 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 287.3471ms
2023-07-21 09:04:56.541 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 16.1258ms
2023-07-21 09:04:56.548 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.6811ms
2023-07-21 09:04:56.626 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:04:56.783 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.3670ms
2023-07-21 09:05:05.937 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:05:05.940 -05:00 [DBG] POST requests are not supported
2023-07-21 09:05:05.964 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:05:05.968 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:05:05.980 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:05:06.046 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:05:06.048 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:05:06.064 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:05:06.065 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:05:06.066 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:05:06.067 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:05:06.070 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:05:06.071 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:05:06.072 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:05:06.073 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:05:06.076 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:05:06.078 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:05:06.079 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:05:06.080 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:05:06.087 -05:00 [DBG] Connection id "0HMS9UDQTGUBT", Request id "0HMS9UDQTGUBT:00000009": started reading request body.
2023-07-21 09:05:06.088 -05:00 [DBG] Connection id "0HMS9UDQTGUBT", Request id "0HMS9UDQTGUBT:00000009": done reading request body.
2023-07-21 09:05:06.201 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:05:06.202 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:05:06.203 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:05:06.208 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:05:06.282 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:05:06.386 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.7414ms.
2023-07-21 09:05:06.391 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:05:06.395 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:05:06.396 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:05:06.397 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:05:06.427 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 352.0121ms
2023-07-21 09:05:06.428 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:05:06.429 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 491.5414ms
2023-07-21 09:05:25.927 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:05:25.930 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:05:25.931 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:25.934 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:25.936 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:05:26.013 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:05:26.014 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:05:26.021 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:05:26.025 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:05:26.025 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 98.3776ms
2023-07-21 09:05:47.838 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:05:47.849 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:05:47.850 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:47.851 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:47.852 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:05:47.854 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:05:47.854 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:05:47.855 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:05:47.856 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:05:47.857 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 18.7998ms
2023-07-21 09:05:49.262 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:05:49.263 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:05:49.264 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:49.264 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:49.265 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:05:49.266 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:05:49.266 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:05:49.267 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:05:49.269 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:05:49.269 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.9757ms
2023-07-21 09:05:49.977 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:05:49.979 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:05:49.979 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:49.980 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:49.981 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:05:49.982 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:05:49.982 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:05:49.984 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:05:49.984 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:05:49.985 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 8.0276ms
2023-07-21 09:05:51.219 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:05:51.220 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:05:51.221 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:51.222 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:51.223 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:05:51.223 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:05:51.224 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:05:51.224 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:05:51.225 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:05:51.225 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.0424ms
2023-07-21 09:05:56.309 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:05:56.310 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:05:56.311 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:56.312 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:05:56.313 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:05:56.314 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:05:56.314 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:05:56.315 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:05:56.316 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:05:56.317 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 7.7041ms
2023-07-21 09:06:20.842 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:06:20.843 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:06:20.844 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:06:20.844 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:06:20.846 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:06:20.846 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:06:20.846 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:06:20.847 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:06:20.848 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:06:20.848 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.2189ms
2023-07-21 09:06:22.390 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:06:22.391 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:06:22.392 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:06:22.392 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:06:22.393 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:06:22.394 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:06:22.394 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:06:22.395 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:06:22.396 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:06:22.397 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.9254ms
2023-07-21 09:06:35.238 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:06:35.347 -05:00 [DBG] Hosting starting
2023-07-21 09:06:35.386 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:06:35.389 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:06:35.393 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:06:35.399 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:06:35.402 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:06:35.409 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:06:35.414 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:06:35.420 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:06:35.423 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:06:35.427 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:06:35.430 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:06:35.432 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:06:35.433 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:06:35.566 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:06:35.624 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:06:35.625 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:06:35.626 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:06:35.626 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:06:35.627 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:06:35.627 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:06:35.628 -05:00 [INF] Hosting environment: Development
2023-07-21 09:06:35.628 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:06:35.629 -05:00 [DBG] Hosting started
2023-07-21 09:06:36.056 -05:00 [DBG] Connection id "0HMS9UEP0TMA1" received FIN.
2023-07-21 09:06:36.056 -05:00 [DBG] Connection id "0HMS9UEP0TMA2" received FIN.
2023-07-21 09:06:36.056 -05:00 [DBG] Connection id "0HMS9UEP0TMA2" accepted.
2023-07-21 09:06:36.056 -05:00 [DBG] Connection id "0HMS9UEP0TMA1" accepted.
2023-07-21 09:06:36.060 -05:00 [DBG] Connection id "0HMS9UEP0TMA1" started.
2023-07-21 09:06:36.060 -05:00 [DBG] Connection id "0HMS9UEP0TMA2" started.
2023-07-21 09:06:36.073 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:06:36.073 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:06:36.105 -05:00 [DBG] Connection id "0HMS9UEP0TMA1" stopped.
2023-07-21 09:06:36.105 -05:00 [DBG] Connection id "0HMS9UEP0TMA2" stopped.
2023-07-21 09:06:36.114 -05:00 [DBG] Connection id "0HMS9UEP0TMA1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:06:36.114 -05:00 [DBG] Connection id "0HMS9UEP0TMA2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:06:37.231 -05:00 [DBG] Connection id "0HMS9UEP0TMA3" accepted.
2023-07-21 09:06:37.234 -05:00 [DBG] Connection id "0HMS9UEP0TMA3" started.
2023-07-21 09:06:37.307 -05:00 [DBG] Connection 0HMS9UEP0TMA3 established using the following protocol: "Tls12"
2023-07-21 09:06:37.341 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:06:37.372 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:06:37.466 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:06:37.606 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:06:37.611 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 271.7687ms
2023-07-21 09:06:37.767 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:06:37.767 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:06:37.779 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 11.7890ms
2023-07-21 09:06:37.788 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.6166ms
2023-07-21 09:06:37.881 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:06:38.073 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 191.3661ms
2023-07-21 09:06:53.851 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:06:53.854 -05:00 [DBG] POST requests are not supported
2023-07-21 09:06:53.877 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:06:53.881 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:06:53.892 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:06:53.956 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:06:53.959 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:06:53.974 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:06:53.976 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:06:53.977 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:06:53.978 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:06:53.979 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:06:53.980 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:06:53.981 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:06:53.982 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:06:53.985 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:06:53.986 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:06:53.990 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:06:53.990 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:06:53.997 -05:00 [DBG] Connection id "0HMS9UEP0TMA3", Request id "0HMS9UEP0TMA3:00000009": started reading request body.
2023-07-21 09:06:53.998 -05:00 [DBG] Connection id "0HMS9UEP0TMA3", Request id "0HMS9UEP0TMA3:00000009": done reading request body.
2023-07-21 09:06:54.110 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:06:54.113 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:06:54.114 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:06:54.119 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:06:54.189 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:06:54.292 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.9537ms.
2023-07-21 09:06:54.295 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:06:54.301 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:06:54.302 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:06:54.303 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:06:54.333 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 348.2773ms
2023-07-21 09:06:54.334 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:06:54.335 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 483.6865ms
2023-07-21 09:07:19.172 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:19.173 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:19.174 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:19.179 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:19.181 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:19.253 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:19.254 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:19.260 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:19.263 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:19.264 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 92.1469ms
2023-07-21 09:07:31.020 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:31.021 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:31.022 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:31.024 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:31.025 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:31.026 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:31.027 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:31.028 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:31.029 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:31.030 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 10.1235ms
2023-07-21 09:07:31.918 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:31.919 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:31.920 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:31.920 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:31.922 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:31.923 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:31.923 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:31.924 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:31.925 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:31.925 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.9164ms
2023-07-21 09:07:32.833 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:32.834 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:32.835 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:32.835 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:32.836 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:32.837 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:32.837 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:32.839 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:32.839 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:32.840 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.2922ms
2023-07-21 09:07:33.581 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:33.583 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:33.584 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:33.585 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:33.586 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:33.587 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:33.587 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:33.588 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:33.589 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:33.589 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 8.1969ms
2023-07-21 09:07:34.621 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:34.622 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:34.623 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:34.624 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:34.626 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:34.627 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:34.627 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:34.628 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:34.629 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:34.630 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 8.7660ms
2023-07-21 09:07:35.552 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:35.553 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:35.554 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:35.554 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:35.556 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:35.557 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:35.557 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:35.558 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:35.559 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:35.559 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.9096ms
2023-07-21 09:07:58.593 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:58.609 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:58.609 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:58.610 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:58.612 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:58.612 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:58.613 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:58.613 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:58.614 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:58.614 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 21.7948ms
2023-07-21 09:07:59.599 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:07:59.600 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:07:59.600 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:59.601 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:07:59.602 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:07:59.603 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:07:59.604 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:07:59.604 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:07:59.605 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:07:59.605 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.4766ms
2023-07-21 09:08:36.351 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:08:36.361 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:08:36.361 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:08:36.362 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:08:36.363 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:08:36.363 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:08:36.364 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:08:36.365 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:08:36.365 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:08:36.366 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 14.7765ms
2023-07-21 09:10:12.107 -05:00 [DBG] Connection id "0HMS9UEP0TMA3" received FIN.
2023-07-21 09:10:12.174 -05:00 [DBG] Connection id "0HMS9UEP0TMA3" is closed. The last processed stream ID was 29.
2023-07-21 09:10:12.176 -05:00 [DBG] Connection id "0HMS9UEP0TMA3" sending FIN because: "The client closed the connection."
2023-07-21 09:10:12.185 -05:00 [DBG] Connection id "0HMS9UEP0TMA3" stopped.
2023-07-21 09:11:02.711 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:11:02.836 -05:00 [DBG] Hosting starting
2023-07-21 09:11:02.874 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:11:02.877 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:11:02.881 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:11:02.886 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:11:02.889 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:11:02.896 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:11:02.897 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:11:02.900 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:11:02.901 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:11:02.905 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:11:02.907 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:11:02.910 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:11:02.911 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:11:03.049 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:11:03.129 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:11:03.130 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:11:03.131 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:11:03.131 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:11:03.132 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:11:03.133 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:11:03.133 -05:00 [INF] Hosting environment: Development
2023-07-21 09:11:03.134 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:11:03.135 -05:00 [DBG] Hosting started
2023-07-21 09:11:03.490 -05:00 [DBG] Connection id "0HMS9UH8NFCES" accepted.
2023-07-21 09:11:03.498 -05:00 [DBG] Connection id "0HMS9UH8NFCET" accepted.
2023-07-21 09:11:03.498 -05:00 [DBG] Connection id "0HMS9UH8NFCES" started.
2023-07-21 09:11:03.499 -05:00 [DBG] Connection id "0HMS9UH8NFCET" started.
2023-07-21 09:11:05.220 -05:00 [DBG] Connection id "0HMS9UH8NFCEU" accepted.
2023-07-21 09:11:05.225 -05:00 [DBG] Connection id "0HMS9UH8NFCEU" started.
2023-07-21 09:11:05.315 -05:00 [DBG] Connection 0HMS9UH8NFCEU established using the following protocol: "Tls12"
2023-07-21 09:11:05.359 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:11:05.389 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:11:05.518 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:11:05.736 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:11:05.736 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:11:05.739 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:11:05.754 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 16.4956ms
2023-07-21 09:11:05.754 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 397.9447ms
2023-07-21 09:11:05.836 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 99.9662ms
2023-07-21 09:11:05.905 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:11:06.072 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 167.5110ms
2023-07-21 09:11:13.510 -05:00 [DBG] Authentication of the HTTPS connection timed out.
2023-07-21 09:11:13.510 -05:00 [DBG] Authentication of the HTTPS connection timed out.
2023-07-21 09:11:13.514 -05:00 [DBG] Connection id "0HMS9UH8NFCET" stopped.
2023-07-21 09:11:13.514 -05:00 [DBG] Connection id "0HMS9UH8NFCES" stopped.
2023-07-21 09:11:13.515 -05:00 [DBG] Connection id "0HMS9UH8NFCET" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:11:13.515 -05:00 [DBG] Connection id "0HMS9UH8NFCES" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:13:20.924 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:13:20.933 -05:00 [DBG] POST requests are not supported
2023-07-21 09:13:20.954 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:13:20.958 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:13:20.968 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:13:21.036 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:13:21.038 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:13:21.053 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:13:21.055 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:13:21.055 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:13:21.056 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:13:21.057 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:13:21.058 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:13:21.059 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:13:21.060 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:13:21.063 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:13:21.067 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:13:21.068 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:13:21.069 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:13:21.076 -05:00 [DBG] Connection id "0HMS9UH8NFCEU", Request id "0HMS9UH8NFCEU:00000009": started reading request body.
2023-07-21 09:13:21.077 -05:00 [DBG] Connection id "0HMS9UH8NFCEU", Request id "0HMS9UH8NFCEU:00000009": done reading request body.
2023-07-21 09:13:21.191 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:13:21.193 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:13:21.193 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:13:21.199 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:13:21.269 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:13:21.367 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 93.4908ms.
2023-07-21 09:13:21.371 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:13:21.375 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:13:21.376 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:13:21.376 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:13:21.407 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 343.8458ms
2023-07-21 09:13:21.408 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:13:21.408 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 484.7263ms
2023-07-21 09:13:55.272 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:13:55.273 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:13:55.274 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:13:55.277 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:13:55.279 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:13:55.351 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:13:55.353 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:13:55.358 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:13:55.361 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:13:55.361 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 88.7455ms
2023-07-21 09:14:34.783 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:14:34.800 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:14:34.800 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:14:34.801 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:14:34.802 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:14:34.803 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:14:34.804 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:14:34.805 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:14:34.806 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:14:34.807 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 29.2250ms
2023-07-21 09:14:52.221 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - -
2023-07-21 09:14:52.222 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:14:52.222 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:14:52.223 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:14:52.224 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:14:52.224 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:14:52.225 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:14:52.226 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:14:52.226 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:14:52.227 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - - - 403 0 - 6.3322ms
2023-07-21 09:14:53.145 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - -
2023-07-21 09:14:53.147 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:14:53.147 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:14:53.148 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:14:53.149 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:14:53.149 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:14:53.150 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:14:53.150 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:14:53.151 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:14:53.151 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - - - 403 0 - 6.0479ms
2023-07-21 09:14:54.059 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - -
2023-07-21 09:14:54.060 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:14:54.060 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:14:54.061 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:14:54.063 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:14:54.064 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:14:54.066 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:14:54.067 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:14:54.067 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:14:54.068 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - - - 403 0 - 9.1999ms
2023-07-21 09:15:32.451 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - -
2023-07-21 09:15:32.451 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:15:32.452 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:15:32.453 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:15:32.455 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:15:32.456 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:15:32.456 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:15:32.457 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:15:32.458 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:15:32.458 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - - - 403 0 - 7.6347ms
2023-07-21 09:18:29.051 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:18:29.208 -05:00 [DBG] Hosting starting
2023-07-21 09:18:29.247 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:18:29.251 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:18:29.255 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:18:29.260 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:18:29.264 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:18:29.270 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:18:29.272 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:18:29.275 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:18:29.277 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:18:29.280 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:18:29.283 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:18:29.285 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:18:29.286 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:18:29.419 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:18:29.475 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:18:29.476 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:18:29.476 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:18:29.477 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:18:29.477 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:18:29.478 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:18:29.478 -05:00 [INF] Hosting environment: Development
2023-07-21 09:18:29.479 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:18:29.479 -05:00 [DBG] Hosting started
2023-07-21 09:18:29.701 -05:00 [DBG] Connection id "0HMS9ULDMS7Q3" accepted.
2023-07-21 09:18:29.703 -05:00 [DBG] Connection id "0HMS9ULDMS7Q3" started.
2023-07-21 09:18:29.708 -05:00 [DBG] Connection id "0HMS9ULDMS7Q4" accepted.
2023-07-21 09:18:29.709 -05:00 [DBG] Connection id "0HMS9ULDMS7Q4" started.
2023-07-21 09:18:29.726 -05:00 [DBG] Connection id "0HMS9ULDMS7Q3" received FIN.
2023-07-21 09:18:29.726 -05:00 [DBG] Connection id "0HMS9ULDMS7Q4" received FIN.
2023-07-21 09:18:29.747 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:18:29.747 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:18:29.788 -05:00 [DBG] Connection id "0HMS9ULDMS7Q3" stopped.
2023-07-21 09:18:29.788 -05:00 [DBG] Connection id "0HMS9ULDMS7Q4" stopped.
2023-07-21 09:18:29.790 -05:00 [DBG] Connection id "0HMS9ULDMS7Q4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:18:29.790 -05:00 [DBG] Connection id "0HMS9ULDMS7Q3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:18:30.715 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5" accepted.
2023-07-21 09:18:30.719 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5" started.
2023-07-21 09:18:30.804 -05:00 [DBG] Connection 0HMS9ULDMS7Q5 established using the following protocol: "Tls12"
2023-07-21 09:18:30.848 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:18:30.878 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:18:30.980 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:18:31.124 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:18:31.128 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:18:31.128 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:18:31.131 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 285.8896ms
2023-07-21 09:18:31.134 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 5.5655ms
2023-07-21 09:18:31.154 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 26.1591ms
2023-07-21 09:18:31.233 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:18:31.397 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.2340ms
2023-07-21 09:18:39.548 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:18:39.551 -05:00 [DBG] POST requests are not supported
2023-07-21 09:18:39.572 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:18:39.575 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:18:39.587 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:18:39.658 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:18:39.662 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:18:39.680 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:18:39.682 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:18:39.683 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:18:39.685 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:18:39.687 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:18:39.688 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:18:39.689 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:18:39.690 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:18:39.693 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:18:39.696 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:18:39.697 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:18:39.698 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:18:39.706 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5", Request id "0HMS9ULDMS7Q5:00000009": started reading request body.
2023-07-21 09:18:39.707 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5", Request id "0HMS9ULDMS7Q5:00000009": done reading request body.
2023-07-21 09:18:39.824 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:18:39.827 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:18:39.828 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:18:39.833 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:18:39.905 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:18:40.003 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 93.6968ms.
2023-07-21 09:18:40.007 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:18:40.012 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:18:40.013 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:18:40.014 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:18:40.044 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 351.154ms
2023-07-21 09:18:40.045 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:18:40.046 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 497.6615ms
2023-07-21 09:18:56.425 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:18:56.426 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:18:56.428 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:18:56.431 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:18:56.432 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:18:56.496 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:18:56.498 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:18:56.504 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:18:56.507 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:18:56.507 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 82.0041ms
2023-07-21 09:19:28.369 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:19:28.376 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:19:28.376 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:19:28.377 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:19:28.378 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:19:28.379 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:19:28.380 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:19:28.381 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:19:28.381 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:19:28.382 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 13.6726ms
2023-07-21 09:19:29.770 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:19:29.771 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:19:29.771 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:19:29.772 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:19:29.773 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:19:29.773 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:19:29.774 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:19:29.774 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:19:29.775 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:19:29.775 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 5.2967ms
2023-07-21 09:19:30.656 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:19:30.657 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:19:30.658 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:19:30.659 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:19:30.661 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:19:30.662 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:19:30.662 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:19:30.663 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:19:30.664 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:19:30.666 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 10.2127ms
2023-07-21 09:19:32.809 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5" received FIN.
2023-07-21 09:19:32.816 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5" is closed. The last processed stream ID was 17.
2023-07-21 09:19:32.817 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5" sending FIN because: "The client closed the connection."
2023-07-21 09:19:32.820 -05:00 [DBG] Connection id "0HMS9ULDMS7Q5" stopped.
2023-07-21 09:21:17.197 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:21:17.317 -05:00 [DBG] Hosting starting
2023-07-21 09:21:17.369 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:21:17.373 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:21:17.377 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:21:17.381 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:21:17.385 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:21:17.392 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:21:17.394 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:21:17.396 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:21:17.398 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:21:17.403 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:21:17.405 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:21:17.408 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:21:17.408 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:21:17.553 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:21:17.617 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:21:17.618 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:21:17.619 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:21:17.619 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:21:17.620 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:21:17.620 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:21:17.621 -05:00 [INF] Hosting environment: Development
2023-07-21 09:21:17.621 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:21:17.622 -05:00 [DBG] Hosting started
2023-07-21 09:21:18.035 -05:00 [DBG] Connection id "0HMS9UMVS7I0N" accepted.
2023-07-21 09:21:18.037 -05:00 [DBG] Connection id "0HMS9UMVS7I0N" started.
2023-07-21 09:21:18.041 -05:00 [DBG] Connection id "0HMS9UMVS7I0O" accepted.
2023-07-21 09:21:18.042 -05:00 [DBG] Connection id "0HMS9UMVS7I0O" started.
2023-07-21 09:21:19.546 -05:00 [DBG] Connection id "0HMS9UMVS7I0P" accepted.
2023-07-21 09:21:19.563 -05:00 [DBG] Connection id "0HMS9UMVS7I0P" started.
2023-07-21 09:21:19.647 -05:00 [DBG] Connection 0HMS9UMVS7I0P established using the following protocol: "Tls12"
2023-07-21 09:21:19.692 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:21:19.721 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:21:19.850 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:21:20.083 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:21:20.088 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 399.5478ms
2023-07-21 09:21:20.091 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:21:20.091 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:21:20.097 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 5.2900ms
2023-07-21 09:21:20.166 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 74.9439ms
2023-07-21 09:21:20.234 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:21:20.430 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 195.6433ms
2023-07-21 09:21:28.115 -05:00 [DBG] Authentication of the HTTPS connection timed out.
2023-07-21 09:21:28.115 -05:00 [DBG] Authentication of the HTTPS connection timed out.
2023-07-21 09:21:28.119 -05:00 [DBG] Connection id "0HMS9UMVS7I0N" stopped.
2023-07-21 09:21:28.119 -05:00 [DBG] Connection id "0HMS9UMVS7I0O" stopped.
2023-07-21 09:21:28.120 -05:00 [DBG] Connection id "0HMS9UMVS7I0N" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:21:28.120 -05:00 [DBG] Connection id "0HMS9UMVS7I0O" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:21:31.106 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json 50
2023-07-21 09:21:31.109 -05:00 [DBG] POST requests are not supported
2023-07-21 09:21:31.129 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:21:31.132 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:21:31.143 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:21:31.223 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:21:31.226 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:21:31.242 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:21:31.243 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:21:31.244 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:21:31.245 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:21:31.246 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:21:31.247 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:21:31.249 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:21:31.251 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:21:31.254 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:21:31.256 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:21:31.258 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 09:21:31.258 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 09:21:31.265 -05:00 [DBG] Connection id "0HMS9UMVS7I0P", Request id "0HMS9UMVS7I0P:00000009": started reading request body.
2023-07-21 09:21:31.266 -05:00 [DBG] Connection id "0HMS9UMVS7I0P", Request id "0HMS9UMVS7I0P:00000009": done reading request body.
2023-07-21 09:21:31.381 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:21:31.383 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:21:31.384 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:21:31.389 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:21:31.461 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:21:31.561 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 94.9448ms.
2023-07-21 09:21:31.564 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:21:31.568 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:21:31.569 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:21:31.570 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:21:31.598 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 346.0789ms
2023-07-21 09:21:31.599 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:21:31.600 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json 50 - 200 299 application/json;+charset=utf-8 493.5728ms
2023-07-21 09:21:46.855 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:21:46.855 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:21:46.857 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:21:46.859 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:21:46.861 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:21:46.924 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:21:46.926 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:21:46.930 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:21:46.934 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:21:46.934 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 79.5529ms
2023-07-21 09:22:15.816 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:22:15.944 -05:00 [DBG] Hosting starting
2023-07-21 09:22:15.985 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:22:15.988 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:22:15.992 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:22:15.998 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:22:16.003 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:22:16.010 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:22:16.013 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:22:16.015 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:22:16.017 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:22:16.021 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:22:16.024 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:22:16.027 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:22:16.028 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:22:16.182 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:22:16.243 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:22:16.243 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:22:16.244 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:22:16.245 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:22:16.246 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:22:16.247 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:22:16.247 -05:00 [INF] Hosting environment: Development
2023-07-21 09:22:16.248 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:22:16.249 -05:00 [DBG] Hosting started
2023-07-21 09:22:16.441 -05:00 [DBG] Connection id "0HMS9UNH97IH9" accepted.
2023-07-21 09:22:16.443 -05:00 [DBG] Connection id "0HMS9UNH97IH9" started.
2023-07-21 09:22:16.444 -05:00 [DBG] Connection id "0HMS9UNH97IHA" accepted.
2023-07-21 09:22:16.451 -05:00 [DBG] Connection id "0HMS9UNH97IHA" started.
2023-07-21 09:22:16.453 -05:00 [DBG] Connection id "0HMS9UNH97IH9" received FIN.
2023-07-21 09:22:16.453 -05:00 [DBG] Connection id "0HMS9UNH97IHA" received FIN.
2023-07-21 09:22:16.470 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:22:16.470 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:22:16.516 -05:00 [DBG] Connection id "0HMS9UNH97IH9" stopped.
2023-07-21 09:22:16.516 -05:00 [DBG] Connection id "0HMS9UNH97IHA" stopped.
2023-07-21 09:22:16.518 -05:00 [DBG] Connection id "0HMS9UNH97IHA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:22:16.518 -05:00 [DBG] Connection id "0HMS9UNH97IH9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:22:17.441 -05:00 [DBG] Connection id "0HMS9UNH97IHB" accepted.
2023-07-21 09:22:17.444 -05:00 [DBG] Connection id "0HMS9UNH97IHB" started.
2023-07-21 09:22:17.523 -05:00 [DBG] Connection 0HMS9UNH97IHB established using the following protocol: "Tls12"
2023-07-21 09:22:17.560 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:22:17.587 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:22:17.688 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:22:17.834 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:22:17.835 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:22:17.835 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:22:17.840 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 282.9115ms
2023-07-21 09:22:17.842 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 7.1410ms
2023-07-21 09:22:17.860 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.7691ms
2023-07-21 09:22:17.944 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:22:18.113 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.9359ms
2023-07-21 09:22:27.763 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:22:27.768 -05:00 [DBG] POST requests are not supported
2023-07-21 09:22:27.791 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:22:27.795 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:22:27.806 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:22:27.869 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:22:27.871 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:22:27.887 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:22:27.888 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:22:27.889 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:22:27.890 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:22:27.892 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:22:27.893 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:22:27.894 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:22:27.895 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:22:27.898 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:22:27.900 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:22:27.902 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:22:27.903 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:22:27.910 -05:00 [DBG] Connection id "0HMS9UNH97IHB", Request id "0HMS9UNH97IHB:00000009": started reading request body.
2023-07-21 09:22:27.911 -05:00 [DBG] Connection id "0HMS9UNH97IHB", Request id "0HMS9UNH97IHB:00000009": done reading request body.
2023-07-21 09:22:28.030 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:22:28.031 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:22:28.031 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:22:28.037 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:22:28.107 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:22:28.209 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.9015ms.
2023-07-21 09:22:28.213 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:22:28.218 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:22:28.219 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:22:28.220 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:22:28.250 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 352.1283ms
2023-07-21 09:22:28.251 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:22:28.252 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 488.5386ms
2023-07-21 09:22:41.505 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:22:41.506 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:22:41.507 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:22:41.511 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:22:41.513 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:22:41.582 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:22:41.584 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:22:41.589 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:22:41.592 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:22:41.593 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 88.7383ms
2023-07-21 09:23:17.065 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:23:17.080 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:23:17.081 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:17.081 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:17.082 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:23:17.084 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:23:17.085 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:23:17.085 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:23:17.086 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:23:17.087 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 21.4234ms
2023-07-21 09:23:17.847 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:23:17.848 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:23:17.849 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:17.850 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:17.855 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:23:17.856 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:23:17.856 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:23:17.858 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:23:17.859 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:23:17.860 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 12.8545ms
2023-07-21 09:23:18.181 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:23:18.182 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:23:18.183 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:18.184 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:18.185 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:23:18.185 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:23:18.186 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:23:18.187 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:23:18.187 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:23:18.188 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 403 0 - 6.5743ms
2023-07-21 09:23:32.573 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 49
2023-07-21 09:23:32.574 -05:00 [DBG] POST requests are not supported
2023-07-21 09:23:32.574 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:32.576 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:23:32.577 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:23:32.578 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:23:32.578 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:23:32.579 -05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Omaha)
2023-07-21 09:23:32.579 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:23:32.580 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 49 - 403 0 - 7.2746ms
2023-07-21 09:23:32.581 -05:00 [DBG] Connection id "0HMS9UNH97IHB", Request id "0HMS9UNH97IHB:00000013": started reading request body.
2023-07-21 09:23:32.582 -05:00 [DBG] Connection id "0HMS9UNH97IHB", Request id "0HMS9UNH97IHB:00000013": done reading request body.
2023-07-21 09:24:08.461 -05:00 [DBG] Connection id "0HMS9UNH97IHB" received FIN.
2023-07-21 09:24:08.533 -05:00 [DBG] Connection id "0HMS9UNH97IHB" is closed. The last processed stream ID was 19.
2023-07-21 09:24:08.535 -05:00 [DBG] Connection id "0HMS9UNH97IHB" sending FIN because: "The client closed the connection."
2023-07-21 09:24:08.541 -05:00 [DBG] Connection id "0HMS9UNH97IHB" stopped.
2023-07-21 09:24:37.908 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:24:38.059 -05:00 [DBG] Hosting starting
2023-07-21 09:24:38.139 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:24:38.144 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:24:38.150 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:24:38.158 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:24:38.163 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:24:38.172 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:24:38.174 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:24:38.177 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:24:38.179 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:24:38.183 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:24:38.186 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:24:38.189 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:24:38.193 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:24:38.326 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:24:38.383 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:24:38.383 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:24:38.384 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:24:38.386 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:24:38.387 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:24:38.388 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:24:38.388 -05:00 [INF] Hosting environment: Development
2023-07-21 09:24:38.389 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:24:38.389 -05:00 [DBG] Hosting started
2023-07-21 09:24:38.675 -05:00 [DBG] Connection id "0HMS9UORLM55J" accepted.
2023-07-21 09:24:38.677 -05:00 [DBG] Connection id "0HMS9UORLM55J" started.
2023-07-21 09:24:38.679 -05:00 [DBG] Connection id "0HMS9UORLM55K" accepted.
2023-07-21 09:24:38.704 -05:00 [DBG] Connection id "0HMS9UORLM55K" started.
2023-07-21 09:24:38.705 -05:00 [DBG] Connection id "0HMS9UORLM55J" received FIN.
2023-07-21 09:24:38.705 -05:00 [DBG] Connection id "0HMS9UORLM55K" received FIN.
2023-07-21 09:24:38.723 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:24:38.723 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:24:38.761 -05:00 [DBG] Connection id "0HMS9UORLM55J" stopped.
2023-07-21 09:24:38.761 -05:00 [DBG] Connection id "0HMS9UORLM55K" stopped.
2023-07-21 09:24:38.763 -05:00 [DBG] Connection id "0HMS9UORLM55J" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:24:38.763 -05:00 [DBG] Connection id "0HMS9UORLM55K" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:24:39.649 -05:00 [DBG] Connection id "0HMS9UORLM55L" accepted.
2023-07-21 09:24:39.659 -05:00 [DBG] Connection id "0HMS9UORLM55L" started.
2023-07-21 09:24:39.734 -05:00 [DBG] Connection 0HMS9UORLM55L established using the following protocol: "Tls12"
2023-07-21 09:24:39.772 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:24:39.804 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:24:39.912 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:24:40.058 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:24:40.070 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 300.6379ms
2023-07-21 09:24:40.071 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:24:40.071 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:24:40.082 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 11.0735ms
2023-07-21 09:24:40.090 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.2866ms
2023-07-21 09:24:40.173 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:24:40.330 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 157.3220ms
2023-07-21 09:24:45.587 -05:00 [DBG] Connection id "0HMS9UORLM55L" received FIN.
2023-07-21 09:24:45.598 -05:00 [DBG] Connection id "0HMS9UORLM55L" is closed. The last processed stream ID was 7.
2023-07-21 09:24:45.600 -05:00 [DBG] Connection id "0HMS9UORLM55L" sending FIN because: "The client closed the connection."
2023-07-21 09:24:45.611 -05:00 [DBG] Connection id "0HMS9UORLM55L" stopped.
2023-07-21 09:26:36.915 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:26:37.036 -05:00 [DBG] Hosting starting
2023-07-21 09:26:37.075 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:26:37.078 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:26:37.082 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:26:37.087 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:26:37.092 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:26:37.099 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:26:37.102 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:26:37.104 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:26:37.106 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:26:37.110 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:26:37.113 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:26:37.115 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:26:37.117 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:26:37.267 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:26:37.345 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:26:37.346 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:26:37.347 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:26:37.348 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:26:37.349 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:26:37.349 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:26:37.350 -05:00 [INF] Hosting environment: Development
2023-07-21 09:26:37.350 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:26:37.351 -05:00 [DBG] Hosting started
2023-07-21 09:26:37.428 -05:00 [DBG] Connection id "0HMS9UPV27730" received FIN.
2023-07-21 09:26:37.428 -05:00 [DBG] Connection id "0HMS9UPV2772V" received FIN.
2023-07-21 09:26:37.436 -05:00 [DBG] Connection id "0HMS9UPV27730" accepted.
2023-07-21 09:26:37.436 -05:00 [DBG] Connection id "0HMS9UPV2772V" accepted.
2023-07-21 09:26:37.438 -05:00 [DBG] Connection id "0HMS9UPV27730" started.
2023-07-21 09:26:37.438 -05:00 [DBG] Connection id "0HMS9UPV2772V" started.
2023-07-21 09:26:37.452 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:26:37.452 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:26:37.489 -05:00 [DBG] Connection id "0HMS9UPV27730" stopped.
2023-07-21 09:26:37.489 -05:00 [DBG] Connection id "0HMS9UPV2772V" stopped.
2023-07-21 09:26:37.492 -05:00 [DBG] Connection id "0HMS9UPV27730" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:26:37.492 -05:00 [DBG] Connection id "0HMS9UPV2772V" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:26:38.363 -05:00 [DBG] Connection id "0HMS9UPV27731" accepted.
2023-07-21 09:26:38.364 -05:00 [DBG] Connection id "0HMS9UPV27731" started.
2023-07-21 09:26:38.444 -05:00 [DBG] Connection 0HMS9UPV27731 established using the following protocol: "Tls12"
2023-07-21 09:26:38.482 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:26:38.509 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:26:38.608 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:26:38.747 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:26:38.753 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 273.8094ms
2023-07-21 09:26:38.754 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:26:38.754 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:26:38.762 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 7.7952ms
2023-07-21 09:26:38.782 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.6821ms
2023-07-21 09:26:38.866 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:26:39.029 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.6285ms
2023-07-21 09:26:44.500 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:26:44.504 -05:00 [DBG] POST requests are not supported
2023-07-21 09:26:44.526 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:26:44.529 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:26:44.540 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:26:44.607 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:26:44.609 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:26:44.628 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:26:44.630 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:26:44.631 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:26:44.632 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:26:44.633 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:26:44.634 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:26:44.635 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:26:44.635 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:26:44.639 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:26:44.641 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:26:44.643 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:26:44.643 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:26:44.650 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000009": started reading request body.
2023-07-21 09:26:44.651 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000009": done reading request body.
2023-07-21 09:26:44.768 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:26:44.769 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:26:44.770 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:26:44.777 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:26:44.848 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:26:44.947 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 93.8104ms.
2023-07-21 09:26:44.951 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:26:44.954 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:26:44.956 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:26:44.957 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:26:44.986 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 347.9831ms
2023-07-21 09:26:44.987 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:26:44.988 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 488.1032ms
2023-07-21 09:27:04.514 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:27:04.515 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:27:04.516 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:27:04.518 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:27:04.520 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:04.588 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:27:04.589 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:27:04.594 -05:00 [DBG] Authorization was successful.
2023-07-21 09:27:04.594 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:04.604 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:27:04.606 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:27:04.607 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:27:04.608 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:27:04.609 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:27:04.610 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:27:04.611 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:27:04.729 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 09:27:04.881 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:27:04.882 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:27:04.883 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:27:04.884 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:04.885 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:04.886 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:27:04.887 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:04.903 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:27:05.619 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:27:05.666 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-07-21 09:27:05.909 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 09:27:05.960 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:06.042 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (78ms).
2023-07-21 09:27:06.056 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:06.071 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:06.084 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:27:06.116 -05:00 [INF] Executed DbCommand (36ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:27:06.127 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:06.134 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:06.139 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:10.832 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-07-21 09:27:10.835 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 09:27:10.836 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:10.836 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:27:10.837 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:10.838 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:10.838 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:27:10.840 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:27:10.841 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:10.841 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:10.842 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:10.848 -05:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2023-07-21 09:27:10.880 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-07-21 09:27:10.888 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:10.889 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:27:10.890 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:10.891 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:10.891 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 09:27:10.893 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 09:27:10.907 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:27:10.928 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:27:10.929 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:10.930 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:10.931 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:10.945 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6041.7952ms.
2023-07-21 09:27:10.946 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:27:10.948 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-07-21 09:27:10.949 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-07-21 09:27:10.950 -05:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-07-21 09:27:10.951 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 6340.5198ms
2023-07-21 09:27:10.952 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:10.956 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:27:10.959 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 406 0 - 6445.2561ms
2023-07-21 09:27:19.228 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 09:27:19.230 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:27:19.231 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:27:19.232 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:27:19.233 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:19.236 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:27:19.236 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:27:19.237 -05:00 [DBG] Authorization was successful.
2023-07-21 09:27:19.238 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:19.239 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:27:19.240 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:27:19.241 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:27:19.241 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:27:19.242 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:27:19.243 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:27:19.244 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:27:19.251 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:27:19.252 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:27:19.253 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:27:19.253 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:19.254 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:19.255 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:27:19.256 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:19.271 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:27:19.273 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:27:19.277 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:19.277 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:27:19.278 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:19.278 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:19.279 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:27:19.280 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:27:19.282 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:19.282 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:19.283 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:19.284 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:19.284 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:27:19.285 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:19.285 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:19.286 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:27:19.287 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:27:19.289 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:19.290 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:19.290 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:19.291 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:19.292 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-07-21 09:27:19.293 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:19.294 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:19.295 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 09:27:19.296 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 09:27:19.297 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:27:19.298 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:27:19.299 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:19.299 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:19.300 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:19.301 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 28.6806ms.
2023-07-21 09:27:19.302 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:27:19.303 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:27:19.304 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:27:19.305 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 09:27:19.324 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 80.2156ms
2023-07-21 09:27:19.326 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:19.326 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:27:19.327 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 200 207 application/json;+charset=utf-8 98.9894ms
2023-07-21 09:27:25.236 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - -
2023-07-21 09:27:25.237 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 09:27:25.237 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:27:25.238 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/2/pointsofinterest'
2023-07-21 09:27:25.240 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:25.241 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:27:25.241 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:27:25.242 -05:00 [DBG] Authorization was successful.
2023-07-21 09:27:25.243 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:25.243 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:27:25.244 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:27:25.245 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:27:25.246 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:27:25.247 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:27:25.248 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:27:25.251 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:27:25.253 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:27:25.253 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:27:25.254 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:27:25.255 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:25.256 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:25.257 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:27:25.257 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:27:25.273 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:27:25.312 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:27:25.316 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:27:25.316 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:27:25.317 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:25.318 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:25.318 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:27:25.320 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 09:27:25.321 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:27:25.321 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:27:25.322 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:27:25.323 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 49.1167ms.
2023-07-21 09:27:25.325 -05:00 [INF] Executing ForbidResult with authentication schemes ([]).
2023-07-21 09:27:25.327 -05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-07-21 09:27:25.327 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 76.7172ms
2023-07-21 09:27:25.329 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 09:27:25.330 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:27:25.330 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/2/pointsofinterest - - - 403 0 - 94.8382ms
2023-07-21 09:28:09.516 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:28:09.519 -05:00 [DBG] POST requests are not supported
2023-07-21 09:28:09.519 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:28:09.520 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:28:09.521 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:28:09.521 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:28:09.522 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:28:09.523 -05:00 [DBG] Authorization was successful.
2023-07-21 09:28:09.523 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:28:09.526 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:28:09.526 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:28:09.527 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:28:09.528 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:28:09.529 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:28:09.529 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:28:09.530 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:28:09.531 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:28:09.532 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:28:09.532 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:28:09.533 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:28:09.534 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:28:09.534 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:28:09.535 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:28:09.536 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:28:09.537 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:28:09.537 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:28:09.538 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:28:09.539 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000011": started reading request body.
2023-07-21 09:28:09.539 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000011": done reading request body.
2023-07-21 09:28:09.541 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:28:09.541 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:28:09.542 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:28:09.543 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:28:09.557 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:28:09.559 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:28:09.560 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:28:09.560 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:28:09.561 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:28:09.561 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:28:09.562 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:28:09.563 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:28:09.564 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:28:09.565 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:28:09.566 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:28:09.612 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 81.7396ms
2023-07-21 09:28:09.614 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:28:09.615 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestForCreationDto -> PointOfInterest
CityInfo.API.Models.PointOfInterestForCreationDto -> CityInfo.API.Entities.PointOfInterest
   at lambda_method84(Closure , Object , PointOfInterest , ResolutionContext )
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\Controllers\PointsOfInterestController.cs:line 129
   at lambda_method76(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:28:09.637 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:28:09.638 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 500 - text/plain;+charset=utf-8 126.6860ms
2023-07-21 09:31:19.581 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:31:19.596 -05:00 [DBG] POST requests are not supported
2023-07-21 09:31:19.596 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:31:19.597 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:31:19.598 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:31:19.598 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:31:19.599 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:31:19.599 -05:00 [DBG] Authorization was successful.
2023-07-21 09:31:19.600 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:31:19.600 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:31:19.602 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:31:19.603 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:31:19.603 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:31:19.605 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:31:19.606 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:31:19.607 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:31:19.607 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:31:19.608 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:31:19.608 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:31:19.609 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:31:19.610 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:31:19.610 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:31:19.611 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:31:19.612 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:31:19.613 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:31:19.613 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:31:19.614 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:31:19.614 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000013": started reading request body.
2023-07-21 09:31:19.615 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000013": done reading request body.
2023-07-21 09:31:19.616 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:31:19.616 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:31:19.617 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:31:19.618 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:31:19.632 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:31:19.633 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:31:19.634 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:31:19.635 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-07-21 09:31:19.636 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:31:19.637 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:31:19.638 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:31:19.639 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:31:19.640 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:31:19.640 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:31:19.641 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:31:19.672 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 65.6254ms
2023-07-21 09:31:19.673 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:31:19.674 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestForCreationDto -> PointOfInterest
CityInfo.API.Models.PointOfInterestForCreationDto -> CityInfo.API.Entities.PointOfInterest
   at lambda_method84(Closure , Object , PointOfInterest , ResolutionContext )
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\Controllers\PointsOfInterestController.cs:line 129
   at lambda_method76(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:31:19.681 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:31:19.682 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 500 - text/plain;+charset=utf-8 100.6328ms
2023-07-21 09:32:05.859 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:32:05.876 -05:00 [DBG] POST requests are not supported
2023-07-21 09:32:05.876 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:32:05.877 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:32:05.878 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:32:05.878 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:32:05.879 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:32:05.879 -05:00 [DBG] Authorization was successful.
2023-07-21 09:32:05.880 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:32:05.880 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:32:05.881 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:32:05.882 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:32:05.883 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:32:05.884 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:32:05.884 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:32:05.885 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:32:05.886 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:32:05.887 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:32:05.887 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:32:05.888 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:32:05.888 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:32:05.889 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:32:05.890 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:32:05.891 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:32:05.891 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:32:05.893 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:32:05.894 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:32:05.895 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000015": started reading request body.
2023-07-21 09:32:05.896 -05:00 [DBG] Connection id "0HMS9UPV27731", Request id "0HMS9UPV27731:00000015": done reading request body.
2023-07-21 09:32:05.897 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:32:05.897 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:32:05.898 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:32:05.899 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:32:05.914 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:32:05.915 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:32:05.916 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:32:05.917 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:32:05.917 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:32:05.918 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:32:05.919 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:32:05.921 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:32:05.922 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:32:05.923 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:32:05.923 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:32:05.956 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 70.3616ms
2023-07-21 09:32:05.957 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:32:05.958 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestForCreationDto -> PointOfInterest
CityInfo.API.Models.PointOfInterestForCreationDto -> CityInfo.API.Entities.PointOfInterest
   at lambda_method84(Closure , Object , PointOfInterest , ResolutionContext )
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\Controllers\PointsOfInterestController.cs:line 129
   at lambda_method76(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:32:05.965 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:32:05.965 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 500 - text/plain;+charset=utf-8 111.8325ms
2023-07-21 09:32:13.628 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:32:13.748 -05:00 [DBG] Hosting starting
2023-07-21 09:32:13.789 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:32:13.793 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:32:13.797 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:32:13.803 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:32:13.806 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:32:13.813 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:32:13.816 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:32:13.819 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:32:13.820 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:32:13.823 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:32:13.825 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:32:13.828 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:32:13.830 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:32:13.980 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:32:14.067 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:32:14.068 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:32:14.069 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:32:14.071 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:32:14.072 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:32:14.073 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:32:14.074 -05:00 [INF] Hosting environment: Development
2023-07-21 09:32:14.076 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:32:14.077 -05:00 [DBG] Hosting started
2023-07-21 09:32:14.102 -05:00 [DBG] Connection id "0HMS9UT3CV2VU" accepted.
2023-07-21 09:32:14.104 -05:00 [DBG] Connection id "0HMS9UT3CV2VU" started.
2023-07-21 09:32:14.105 -05:00 [DBG] Connection id "0HMS9UT3CV2VV" accepted.
2023-07-21 09:32:14.119 -05:00 [DBG] Connection id "0HMS9UT3CV2VV" started.
2023-07-21 09:32:14.120 -05:00 [DBG] Connection id "0HMS9UT3CV2VV" received FIN.
2023-07-21 09:32:14.120 -05:00 [DBG] Connection id "0HMS9UT3CV2VU" received FIN.
2023-07-21 09:32:14.141 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:32:14.141 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:32:14.178 -05:00 [DBG] Connection id "0HMS9UT3CV2VU" stopped.
2023-07-21 09:32:14.178 -05:00 [DBG] Connection id "0HMS9UT3CV2VV" stopped.
2023-07-21 09:32:14.181 -05:00 [DBG] Connection id "0HMS9UT3CV2VU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:32:14.181 -05:00 [DBG] Connection id "0HMS9UT3CV2VV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:32:15.091 -05:00 [DBG] Connection id "0HMS9UT3CV300" accepted.
2023-07-21 09:32:15.093 -05:00 [DBG] Connection id "0HMS9UT3CV300" started.
2023-07-21 09:32:15.182 -05:00 [DBG] Connection 0HMS9UT3CV300 established using the following protocol: "Tls12"
2023-07-21 09:32:15.224 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:32:15.254 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:32:15.363 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:32:15.515 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:32:15.517 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:32:15.517 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:32:15.519 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 298.4957ms
2023-07-21 09:32:15.522 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 4.8369ms
2023-07-21 09:32:15.536 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.5085ms
2023-07-21 09:32:15.614 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:32:15.770 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.0800ms
2023-07-21 09:32:47.709 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:32:47.719 -05:00 [DBG] POST requests are not supported
2023-07-21 09:32:47.741 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:32:47.748 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:32:47.752 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:32:47.818 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:32:47.825 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (New York City)
2023-07-21 09:32:47.831 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-07-21 09:32:47.832 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 401 0 - 122.4331ms
2023-07-21 09:32:47.832 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000009": started reading request body.
2023-07-21 09:32:47.833 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000009": done reading request body.
2023-07-21 09:33:19.389 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 09:33:19.402 -05:00 [DBG] POST requests are not supported
2023-07-21 09:33:19.408 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 09:33:19.408 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 09:33:19.415 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:33:19.417 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 09:33:19.417 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:33:19.433 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 09:33:19.434 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:33:19.435 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:33:19.435 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:33:19.437 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:33:19.438 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:33:19.439 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:33:19.439 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 09:33:19.444 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:33:19.447 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 09:33:19.449 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:33:19.450 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:33:19.457 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:0000000B": started reading request body.
2023-07-21 09:33:19.458 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:0000000B": done reading request body.
2023-07-21 09:33:19.572 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:33:19.573 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:33:19.574 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 09:33:19.580 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 09:33:19.649 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:33:19.750 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.0575ms.
2023-07-21 09:33:19.754 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:33:19.757 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:33:19.758 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:33:19.759 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 09:33:19.788 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 346.3679ms
2023-07-21 09:33:19.789 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 09:33:19.790 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 400.9120ms
2023-07-21 09:33:41.352 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:33:41.364 -05:00 [DBG] POST requests are not supported
2023-07-21 09:33:41.364 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:33:41.365 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:33:41.366 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:33:41.430 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:33:41.432 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:33:41.433 -05:00 [DBG] Authorization was successful.
2023-07-21 09:33:41.433 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:33:41.441 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:33:41.442 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:33:41.443 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:33:41.443 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:33:41.444 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:33:41.445 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:33:41.446 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:33:41.561 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 09:33:41.714 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:33:41.715 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:33:41.716 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:33:41.717 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:33:41.718 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:33:41.718 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:33:41.719 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:33:41.720 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:33:41.721 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:33:41.722 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:33:41.723 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:33:41.723 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:0000000D": started reading request body.
2023-07-21 09:33:41.724 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:0000000D": done reading request body.
2023-07-21 09:33:41.725 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:33:41.726 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:33:41.726 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:33:41.728 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:33:41.746 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:33:42.434 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:33:42.478 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-07-21 09:33:42.714 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 09:33:42.762 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:33:42.827 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-07-21 09:33:42.840 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:33:42.855 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:33:42.868 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:33:42.895 -05:00 [INF] Executed DbCommand (32ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:33:42.906 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:33:42.913 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:33:42.917 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:33:42.928 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-07-21 09:33:42.963 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 09:33:42.973 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:33:42.974 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:33:42.974 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:33:42.975 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:33:42.975 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:33:42.976 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:33:42.990 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:33:43.009 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:33:43.009 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:33:43.010 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:33:43.016 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 09:33:43.018 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 09:33:43.038 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:33:43.065 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:33:43.088 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:33:43.092 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 09:33:43.109 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:33:43.109 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:33:43.112 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 09:33:43.116 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 09:33:43.159 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:33:43.160 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-07-21 09:33:43.162 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:33:43.165 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:33:43.183 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 09:33:43.189 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:33:43.194 -05:00 [DBG] Committing transaction.
2023-07-21 09:33:43.201 -05:00 [DBG] Committed transaction.
2023-07-21 09:33:43.206 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:33:43.206 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:33:43.210 -05:00 [DBG] Disposing transaction.
2023-07-21 09:33:43.218 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:33:43.220 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 09:33:43.223 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 1475.7674ms.
2023-07-21 09:33:43.224 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:33:43.225 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:33:43.228 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:33:43.230 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Entities.PointOfInterest'.
2023-07-21 09:33:43.248 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 09:33:43.255 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/7 and 
2023-07-21 09:33:43.259 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/7
2023-07-21 09:33:43.287 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 1840.5543ms
2023-07-21 09:33:43.289 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:33:43.291 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'CityInfo.API.Entities.PointOfInterest'. Path 'city.pointsOfInterest'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:33:43.310 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:33:43.314 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 500 - text/plain;+charset=utf-8 1962.2493ms
2023-07-21 09:47:28.748 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:47:28.770 -05:00 [DBG] POST requests are not supported
2023-07-21 09:47:28.773 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:28.773 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:28.774 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:28.775 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:47:28.775 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:47:28.776 -05:00 [DBG] Authorization was successful.
2023-07-21 09:47:28.777 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:28.777 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:47:28.778 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:47:28.779 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:47:28.780 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:28.781 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:47:28.782 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:28.783 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:28.790 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:28.790 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:28.791 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:47:28.792 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:28.792 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:28.793 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:28.793 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:28.794 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:28.794 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:47:28.797 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:47:28.798 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:47:28.798 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:0000000F": started reading request body.
2023-07-21 09:47:28.799 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:0000000F": done reading request body.
2023-07-21 09:47:28.799 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:28.800 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:28.801 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:28.801 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:28.815 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:47:28.832 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:47:28.836 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:28.836 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:28.837 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:28.839 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:28.839 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:28.844 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:28.845 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:28.845 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:28.846 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:28.847 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:28.847 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:28.848 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:28.849 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:28.849 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:28.850 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:28.851 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:28.852 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:28.853 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:28.853 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:28.854 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 09:47:28.855 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 09:47:28.855 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:28.857 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:28.857 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:28.858 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 09:47:28.859 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:28.859 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:28.860 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 09:47:28.860 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 09:47:28.861 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:28.861 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:28.862 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:28.863 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:28.865 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 09:47:28.866 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:28.866 -05:00 [DBG] Committing transaction.
2023-07-21 09:47:28.873 -05:00 [DBG] Committed transaction.
2023-07-21 09:47:28.874 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:28.874 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:28.875 -05:00 [DBG] Disposing transaction.
2023-07-21 09:47:28.875 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:28.876 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 09:47:28.877 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 60.7668ms.
2023-07-21 09:47:28.878 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:47:28.879 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:47:28.880 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:47:28.881 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Entities.PointOfInterest'.
2023-07-21 09:47:28.881 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 09:47:28.882 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/8 and 
2023-07-21 09:47:28.883 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/8
2023-07-21 09:47:28.885 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 101.8435ms
2023-07-21 09:47:28.886 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:28.887 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'CityInfo.API.Entities.PointOfInterest'. Path 'city.pointsOfInterest'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:47:28.898 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:47:28.903 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 500 - text/plain;+charset=utf-8 150.9193ms
2023-07-21 09:47:30.782 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54
2023-07-21 09:47:30.783 -05:00 [DBG] POST requests are not supported
2023-07-21 09:47:30.783 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:30.784 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:30.786 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:30.787 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:47:30.788 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:47:30.789 -05:00 [DBG] Authorization was successful.
2023-07-21 09:47:30.789 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:30.790 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:47:30.792 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:47:30.793 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:47:30.793 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:30.795 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:47:30.796 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:30.797 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:30.799 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:30.800 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:30.801 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:47:30.802 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:30.802 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:30.803 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:30.804 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:30.805 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:30.806 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:47:30.807 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:47:30.807 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 09:47:30.808 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000011": started reading request body.
2023-07-21 09:47:30.809 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000011": done reading request body.
2023-07-21 09:47:30.809 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:30.810 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:30.810 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:30.811 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:30.825 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:47:30.863 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:47:30.864 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:30.865 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:30.866 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:30.866 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:30.868 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:30.869 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:30.870 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:30.870 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:30.871 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:30.872 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:30.872 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:30.873 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:30.874 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:30.874 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:30.875 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:30.876 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:30.877 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:30.877 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:30.878 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:30.878 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 09:47:30.879 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 09:47:30.879 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:30.880 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:30.881 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:30.882 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 09:47:30.883 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:30.883 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:30.884 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 09:47:30.884 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 09:47:30.885 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:30.885 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:30.886 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:30.887 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:30.888 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 09:47:30.889 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:30.889 -05:00 [DBG] Committing transaction.
2023-07-21 09:47:30.899 -05:00 [DBG] Committed transaction.
2023-07-21 09:47:30.899 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:30.900 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:30.900 -05:00 [DBG] Disposing transaction.
2023-07-21 09:47:30.901 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:30.902 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 09:47:30.902 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 76.7722ms.
2023-07-21 09:47:30.903 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:47:30.905 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:47:30.905 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:47:30.906 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Entities.PointOfInterest'.
2023-07-21 09:47:30.906 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 09:47:30.907 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/9 and 
2023-07-21 09:47:30.908 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/9
2023-07-21 09:47:30.910 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 113.1486ms
2023-07-21 09:47:30.911 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:30.912 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'CityInfo.API.Entities.PointOfInterest'. Path 'city.pointsOfInterest'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:47:30.919 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:47:30.919 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json-patch+json 54 - 500 - text/plain;+charset=utf-8 137.6607ms
2023-07-21 09:47:41.780 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54
2023-07-21 09:47:41.781 -05:00 [DBG] POST requests are not supported
2023-07-21 09:47:41.782 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:41.782 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:41.783 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:41.784 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:47:41.785 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:47:41.786 -05:00 [DBG] Authorization was successful.
2023-07-21 09:47:41.786 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:41.787 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:47:41.789 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:47:41.789 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:47:41.790 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:41.791 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:47:41.792 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:41.793 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:41.793 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:41.794 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:41.795 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:47:41.795 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:41.796 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:41.797 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:41.797 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:41.798 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:41.799 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:47:41.799 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 09:47:41.801 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 09:47:41.801 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000013": started reading request body.
2023-07-21 09:47:41.802 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000013": done reading request body.
2023-07-21 09:47:41.803 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:41.803 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:41.804 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:41.805 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:41.818 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:47:41.819 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:47:41.820 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:41.820 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:41.821 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:41.821 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:41.822 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:41.823 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:41.824 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:41.824 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:41.825 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:41.826 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:41.826 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:41.827 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:41.827 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:41.828 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:41.829 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:41.830 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:41.831 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:41.831 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:41.832 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:41.833 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 09:47:41.833 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 09:47:41.834 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:41.835 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:41.835 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:41.836 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 09:47:41.836 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:41.837 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:41.838 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 09:47:41.839 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 09:47:41.839 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:41.840 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:41.840 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:41.841 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:41.842 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 09:47:41.843 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:41.843 -05:00 [DBG] Committing transaction.
2023-07-21 09:47:41.853 -05:00 [DBG] Committed transaction.
2023-07-21 09:47:41.853 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:41.854 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:41.855 -05:00 [DBG] Disposing transaction.
2023-07-21 09:47:41.856 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:41.856 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 09:47:41.857 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 38.6292ms.
2023-07-21 09:47:41.858 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:47:41.859 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:47:41.860 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:47:41.860 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Entities.PointOfInterest'.
2023-07-21 09:47:41.861 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 09:47:41.862 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/10 and 
2023-07-21 09:47:41.864 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/10
2023-07-21 09:47:41.866 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 73.8492ms
2023-07-21 09:47:41.867 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:41.868 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'CityInfo.API.Entities.PointOfInterest'. Path 'city.pointsOfInterest'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:47:41.875 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:47:41.876 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54 - 500 - text/plain;+charset=utf-8 95.9073ms
2023-07-21 09:47:46.466 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54
2023-07-21 09:47:46.468 -05:00 [DBG] POST requests are not supported
2023-07-21 09:47:46.468 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:46.470 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:47:46.471 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:46.472 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:47:46.472 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:47:46.473 -05:00 [DBG] Authorization was successful.
2023-07-21 09:47:46.473 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:46.474 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:47:46.474 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:47:46.475 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:47:46.476 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:46.477 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:47:46.477 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:47:46.478 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:46.479 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:47:46.480 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:46.480 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:47:46.481 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:46.481 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:46.482 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:47:46.483 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:47:46.483 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:46.484 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:47:46.485 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 09:47:46.486 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 09:47:46.487 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000015": started reading request body.
2023-07-21 09:47:46.488 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000015": done reading request body.
2023-07-21 09:47:46.489 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:46.489 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:46.490 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:47:46.490 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:47:46.504 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:47:46.506 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:47:46.507 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:46.507 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:46.508 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:46.508 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:46.509 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:46.510 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:47:46.511 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:46.511 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:46.512 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:46.513 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:46.514 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:46.514 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:46.515 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:46.516 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:46.517 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:47:46.518 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:46.519 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:46.519 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:46.520 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:46.520 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 09:47:46.521 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 09:47:46.521 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:46.522 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:46.523 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:46.524 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 09:47:46.524 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:46.525 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:46.525 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 09:47:46.526 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 09:47:46.526 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:47:46.527 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:47:46.527 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:46.528 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:47:46.530 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 09:47:46.530 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:47:46.532 -05:00 [DBG] Committing transaction.
2023-07-21 09:47:46.537 -05:00 [DBG] Committed transaction.
2023-07-21 09:47:46.538 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:47:46.538 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:47:46.539 -05:00 [DBG] Disposing transaction.
2023-07-21 09:47:46.539 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:47:46.540 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 09:47:46.541 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 35.6835ms.
2023-07-21 09:47:46.542 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:47:46.543 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:47:46.544 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:47:46.544 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Entities.PointOfInterest'.
2023-07-21 09:47:46.545 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 09:47:46.547 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/11 and 
2023-07-21 09:47:46.548 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/11
2023-07-21 09:47:46.550 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 71.6956ms
2023-07-21 09:47:46.550 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:47:46.551 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'CityInfo.API.Entities.PointOfInterest'. Path 'city.pointsOfInterest'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:47:46.559 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:47:46.559 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54 - 500 - text/plain;+charset=utf-8 92.9085ms
2023-07-21 09:48:26.513 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54
2023-07-21 09:48:26.530 -05:00 [DBG] POST requests are not supported
2023-07-21 09:48:26.530 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:48:26.531 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 09:48:26.532 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:48:26.533 -05:00 [DBG] Successfully validated the token.
2023-07-21 09:48:26.533 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 09:48:26.534 -05:00 [DBG] Authorization was successful.
2023-07-21 09:48:26.534 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:48:26.535 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 09:48:26.536 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 09:48:26.537 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 09:48:26.538 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:48:26.539 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 09:48:26.540 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 09:48:26.541 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:48:26.542 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 09:48:26.542 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:48:26.543 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 09:48:26.544 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:48:26.544 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:48:26.545 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 09:48:26.545 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 09:48:26.546 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:48:26.547 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 09:48:26.548 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 09:48:26.549 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 09:48:26.550 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000017": started reading request body.
2023-07-21 09:48:26.550 -05:00 [DBG] Connection id "0HMS9UT3CV300", Request id "0HMS9UT3CV300:00000017": done reading request body.
2023-07-21 09:48:26.551 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:48:26.551 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:48:26.552 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 09:48:26.552 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 09:48:26.567 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 09:48:30.463 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 09:48:30.465 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:48:30.465 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:48:30.466 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:48:30.467 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:48:30.467 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:48:30.468 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 09:48:30.469 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:48:30.470 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:48:30.470 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:48:31.479 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:48:31.481 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-07-21 09:48:31.482 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:48:31.483 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:48:31.483 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:48:31.484 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 09:48:31.485 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:48:31.486 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:48:31.486 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:48:31.487 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:48:32.084 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 09:48:32.085 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 09:48:32.086 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:48:32.087 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:48:32.088 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:48:32.089 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 09:48:32.089 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:48:32.090 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:48:32.090 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 09:48:32.091 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 09:48:32.091 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 09:48:32.092 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 09:48:32.092 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:48:32.093 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 09:48:32.094 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 09:48:32.095 -05:00 [DBG] A data reader was disposed.
2023-07-21 09:48:32.095 -05:00 [DBG] Committing transaction.
2023-07-21 09:48:32.104 -05:00 [DBG] Committed transaction.
2023-07-21 09:48:32.105 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 09:48:32.105 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 09:48:32.106 -05:00 [DBG] Disposing transaction.
2023-07-21 09:48:32.107 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 09:48:32.108 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 09:48:52.969 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 26401.4007ms.
2023-07-21 09:48:52.971 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 09:48:52.972 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 09:48:52.973 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 09:48:52.974 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Entities.PointOfInterest'.
2023-07-21 09:48:52.975 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 09:48:52.975 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/12 and 
2023-07-21 09:48:52.976 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/12
2023-07-21 09:48:52.995 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 26453.9849ms
2023-07-21 09:48:52.999 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 09:48:53.006 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'CityInfo.API.Entities.PointOfInterest'. Path 'city.pointsOfInterest'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-07-21 09:48:53.013 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 09:48:53.013 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54 - 500 - text/plain;+charset=utf-8 26500.3458ms
2023-07-21 09:59:49.591 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 09:59:49.724 -05:00 [DBG] Hosting starting
2023-07-21 09:59:49.787 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 09:59:49.793 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 09:59:49.798 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 09:59:49.804 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 09:59:49.810 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 09:59:49.819 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 09:59:49.821 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:59:49.825 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 09:59:49.827 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 09:59:49.832 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 09:59:49.834 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 09:59:49.838 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 09:59:49.839 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 09:59:50.043 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 09:59:50.118 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 09:59:50.118 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 09:59:50.119 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 09:59:50.119 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 09:59:50.120 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 09:59:50.121 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 09:59:50.122 -05:00 [INF] Hosting environment: Development
2023-07-21 09:59:50.122 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 09:59:50.123 -05:00 [DBG] Hosting started
2023-07-21 09:59:50.190 -05:00 [DBG] Connection id "0HMS9VCGUHNAS" accepted.
2023-07-21 09:59:50.190 -05:00 [DBG] Connection id "0HMS9VCGUHNAT" accepted.
2023-07-21 09:59:50.190 -05:00 [DBG] Connection id "0HMS9VCGUHNAT" received FIN.
2023-07-21 09:59:50.190 -05:00 [DBG] Connection id "0HMS9VCGUHNAS" received FIN.
2023-07-21 09:59:50.191 -05:00 [DBG] Connection id "0HMS9VCGUHNAS" started.
2023-07-21 09:59:50.191 -05:00 [DBG] Connection id "0HMS9VCGUHNAT" started.
2023-07-21 09:59:50.206 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:59:50.206 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 09:59:50.257 -05:00 [DBG] Connection id "0HMS9VCGUHNAT" stopped.
2023-07-21 09:59:50.257 -05:00 [DBG] Connection id "0HMS9VCGUHNAS" stopped.
2023-07-21 09:59:50.259 -05:00 [DBG] Connection id "0HMS9VCGUHNAT" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:59:50.259 -05:00 [DBG] Connection id "0HMS9VCGUHNAS" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 09:59:52.601 -05:00 [DBG] Connection id "0HMS9VCGUHNAU" accepted.
2023-07-21 09:59:52.603 -05:00 [DBG] Connection id "0HMS9VCGUHNAU" started.
2023-07-21 09:59:52.697 -05:00 [DBG] Connection 0HMS9VCGUHNAU established using the following protocol: "Tls12"
2023-07-21 09:59:52.735 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 09:59:52.767 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 09:59:52.875 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 09:59:53.061 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 09:59:53.063 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 09:59:53.063 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 09:59:53.066 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 334.6042ms
2023-07-21 09:59:53.069 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 6.0229ms
2023-07-21 09:59:53.078 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.3086ms
2023-07-21 09:59:53.172 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 09:59:53.335 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.2850ms
2023-07-21 10:00:05.488 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json 50
2023-07-21 10:00:05.493 -05:00 [DBG] POST requests are not supported
2023-07-21 10:00:05.519 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 10:00:05.523 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 10:00:05.534 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:00:05.618 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:00:05.621 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:00:05.637 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 10:00:05.639 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:00:05.640 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:00:05.641 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:00:05.643 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:00:05.643 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:00:05.645 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:00:05.646 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:00:05.649 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:00:05.651 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 10:00:05.652 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 10:00:05.653 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 10:00:05.660 -05:00 [DBG] Connection id "0HMS9VCGUHNAU", Request id "0HMS9VCGUHNAU:00000009": started reading request body.
2023-07-21 10:00:05.661 -05:00 [DBG] Connection id "0HMS9VCGUHNAU", Request id "0HMS9VCGUHNAU:00000009": done reading request body.
2023-07-21 10:00:05.812 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:00:05.814 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:00:05.815 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:00:05.821 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:00:05.894 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:00:05.997 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.5089ms.
2023-07-21 10:00:06.001 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:00:06.006 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:00:06.008 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:00:06.008 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 10:00:06.039 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 390.8134ms
2023-07-21 10:00:06.040 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:00:06.041 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json 50 - 200 299 application/json;+charset=utf-8 552.8062ms
2023-07-21 10:00:51.331 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54
2023-07-21 10:00:51.348 -05:00 [DBG] POST requests are not supported
2023-07-21 10:00:51.350 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:00:51.353 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:00:51.354 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 10:00:51.428 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:00:51.431 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:00:51.435 -05:00 [DBG] Authorization was successful.
2023-07-21 10:00:51.436 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 10:00:51.445 -05:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:00:51.447 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:00:51.448 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:00:51.449 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:00:51.450 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:00:51.451 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:00:51.452 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:00:51.606 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 10:00:51.778 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:00:51.781 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:00:51.782 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:00:51.784 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:00:51.784 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:00:51.785 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:00:51.786 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:00:51.787 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 10:00:51.787 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-07-21 10:00:51.789 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 10:00:51.790 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 10:00:51.790 -05:00 [DBG] Connection id "0HMS9VCGUHNAU", Request id "0HMS9VCGUHNAU:0000000B": started reading request body.
2023-07-21 10:00:51.791 -05:00 [DBG] Connection id "0HMS9VCGUHNAU", Request id "0HMS9VCGUHNAU:0000000B": done reading request body.
2023-07-21 10:00:51.793 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 10:00:51.793 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 10:00:51.794 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-07-21 10:00:51.795 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-07-21 10:00:51.812 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:00:54.807 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:00:54.851 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-07-21 10:00:55.109 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:00:55.166 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:00:55.248 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (78ms).
2023-07-21 10:00:55.262 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:00:55.279 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:00:55.294 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:00:55.319 -05:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:00:55.330 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:00:55.337 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:00:55.345 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:00:55.358 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-07-21 10:00:55.395 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:00:55.407 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:00:55.408 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:00:55.408 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:00:55.409 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:00:55.410 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 10:00:55.411 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-07-21 10:00:55.427 -05:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:00:55.447 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:00:55.448 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:00:55.448 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:00:55.455 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 10:00:55.457 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 10:00:55.476 -05:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:00:55.506 -05:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:00:55.535 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:00:55.539 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 10:00:55.559 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:00:55.560 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:00:55.563 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 10:00:55.569 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 10:00:55.618 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:00:55.619 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:00:55.620 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 10:00:55.624 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 6), @p2='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-07-21 10:00:55.643 -05:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 10:00:55.650 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:00:55.656 -05:00 [DBG] Committing transaction.
2023-07-21 10:00:55.660 -05:00 [DBG] Committed transaction.
2023-07-21 10:00:55.666 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:00:55.666 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:00:55.670 -05:00 [DBG] Disposing transaction.
2023-07-21 10:00:55.681 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:00:55.683 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 10:00:55.686 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.CreatedAtRouteResult in 3872.5782ms.
2023-07-21 10:00:55.687 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:00:55.689 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:00:55.690 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:00:55.691 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-07-21 10:00:55.710 -05:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-07-21 10:00:55.718 -05:00 [DBG] Successfully processed template api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/v2/cities/1/pointsofinterest/13 and 
2023-07-21 10:00:55.719 -05:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/v2/cities/1/pointsofinterest/13
2023-07-21 10:00:55.732 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 4280.0395ms
2023-07-21 10:00:55.733 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-07-21 10:00:55.738 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:00:55.742 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/v2/cities/1/pointsofinterest application/json 54 - 201 53 application/json;+charset=utf-8 4412.1594ms
2023-07-21 10:01:16.312 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 10:01:16.325 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:01:16.326 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:01:16.326 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:01:16.327 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:01:16.329 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:01:16.330 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:01:16.331 -05:00 [DBG] Authorization was successful.
2023-07-21 10:01:16.331 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:01:16.334 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:01:16.335 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:01:16.336 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:01:16.336 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:01:16.338 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:01:16.339 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:01:16.340 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:01:16.347 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:01:16.349 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:01:16.350 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:01:16.351 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:01:16.352 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:01:16.352 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:01:16.353 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:01:16.369 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:01:16.382 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:01:16.384 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-07-21 10:01:16.386 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:01:16.389 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:01:16.390 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:01:16.391 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:01:16.391 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:01:16.392 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:01:16.394 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:01:16.395 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:01:16.395 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:01:16.396 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:01:16.400 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:01:16.400 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:01:16.401 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:01:16.401 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:01:16.402 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:01:16.403 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:01:16.405 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:01:16.405 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:01:16.407 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:01:16.414 -05:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2023-07-21 10:01:16.418 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-07-21 10:01:16.420 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:01:16.420 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:01:16.421 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:01:16.422 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:01:16.423 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:01:16.425 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:01:16.427 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.428 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.428 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.430 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.431 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.432 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.432 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.433 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.434 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:01:16.435 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:01:16.435 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:01:16.436 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:01:16.445 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.2377ms.
2023-07-21 10:01:16.447 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:01:16.449 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-07-21 10:01:16.450 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-07-21 10:01:16.451 -05:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-07-21 10:01:16.452 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 112.4753ms
2023-07-21 10:01:16.453 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:01:16.454 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:01:16.455 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 406 0 - 142.9265ms
2023-07-21 10:02:05.488 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 10:02:05.504 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:02:05.504 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:02:05.505 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:02:05.506 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:02:05.506 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:02:05.507 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:02:05.508 -05:00 [DBG] Authorization was successful.
2023-07-21 10:02:05.508 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:02:05.509 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:02:05.510 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:02:05.511 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:02:05.511 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:02:05.512 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:02:05.514 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:02:05.515 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:02:05.517 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:02:05.518 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:02:05.518 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:02:05.519 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:02:05.519 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:02:05.520 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:02:05.520 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:02:05.534 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:02:05.571 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:02:05.575 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:02:05.576 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:02:05.576 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:02:05.577 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:02:05.578 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:02:05.579 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:02:05.580 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:02:05.580 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:02:05.581 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:02:05.582 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:02:05.582 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:02:05.583 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:02:05.583 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:02:05.584 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:02:05.585 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:02:05.586 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:02:05.586 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:02:05.587 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:02:05.588 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:02:05.589 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:02:05.590 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:02:05.590 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:02:05.591 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:02:05.592 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:02:05.593 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.594 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.594 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.595 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.596 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.596 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.597 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.598 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.598 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:02:05.599 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:02:05.600 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:02:05.600 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:02:05.601 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.9667ms.
2023-07-21 10:02:05.601 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:02:05.603 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:02:05.604 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:02:05.605 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 10:02:05.613 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 97.7244ms
2023-07-21 10:02:05.614 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:02:05.615 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:02:05.615 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 200 582 application/json;+charset=utf-8 131.9810ms
2023-07-21 10:02:34.212 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - -
2023-07-21 10:02:34.213 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:02:34.213 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:02:34.214 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:02:34.215 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:02:34.216 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:02:34.216 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:02:34.217 -05:00 [DBG] Authorization was successful.
2023-07-21 10:02:34.217 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:02:34.220 -05:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:02:34.222 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:02:34.222 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:02:34.223 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:02:34.225 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:02:34.225 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:02:34.226 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:02:34.227 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:02:34.227 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:02:34.228 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:02:34.229 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:02:34.229 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:02:34.230 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:02:34.230 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:02:34.231 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:02:34.232 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:02:34.234 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:02:34.234 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:02:34.235 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:02:34.236 -05:00 [DBG] The request has model state errors, returning an error response.
2023-07-21 10:02:34.237 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-07-21 10:02:34.238 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:02:34.240 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-07-21 10:02:34.241 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-07-21 10:02:34.242 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-07-21 10:02:34.264 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 37.5155ms
2023-07-21 10:02:34.265 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:02:34.265 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - - - 400 272 application/problem+json;+charset=utf-8 53.2457ms
2023-07-21 10:03:00.857 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - -
2023-07-21 10:03:00.867 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:03:00.868 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:00.869 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:00.870 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:00.871 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:03:00.871 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:03:00.872 -05:00 [DBG] Authorization was successful.
2023-07-21 10:03:00.872 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:00.873 -05:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:03:00.874 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:03:00.875 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:03:00.876 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:00.877 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:03:00.878 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:00.879 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:00.879 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:00.880 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:00.881 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:03:00.882 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:00.883 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:00.884 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:00.884 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:00.885 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:00.885 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:03:00.886 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:00.887 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:00.888 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:00.888 -05:00 [DBG] The request has model state errors, returning an error response.
2023-07-21 10:03:00.889 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-07-21 10:03:00.889 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:03:00.891 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-07-21 10:03:00.892 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-07-21 10:03:00.893 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-07-21 10:03:00.894 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 15.1999ms
2023-07-21 10:03:00.895 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:00.895 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - - - 400 272 application/problem+json;+charset=utf-8 38.1505ms
2023-07-21 10:03:17.347 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - -
2023-07-21 10:03:17.348 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:03:17.349 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:17.350 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:17.351 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:17.352 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:03:17.352 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:03:17.353 -05:00 [DBG] Authorization was successful.
2023-07-21 10:03:17.353 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:17.355 -05:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:03:17.356 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:03:17.356 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:03:17.357 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:17.358 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:03:17.359 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:17.360 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:17.361 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:17.362 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:17.362 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:03:17.363 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:17.364 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:17.364 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:17.365 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:17.366 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:17.366 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:03:17.367 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:17.368 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:17.368 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:17.369 -05:00 [DBG] The request has model state errors, returning an error response.
2023-07-21 10:03:17.369 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-07-21 10:03:17.370 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:03:17.371 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-07-21 10:03:17.373 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-07-21 10:03:17.373 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-07-21 10:03:17.374 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 13.8168ms
2023-07-21 10:03:17.375 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:17.376 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - - - 400 272 application/problem+json;+charset=utf-8 29.0387ms
2023-07-21 10:03:28.232 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - -
2023-07-21 10:03:28.234 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:03:28.234 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:28.236 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:28.237 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:28.237 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:03:28.238 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:03:28.239 -05:00 [DBG] Authorization was successful.
2023-07-21 10:03:28.239 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:28.240 -05:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:03:28.242 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:03:28.243 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:03:28.244 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:28.245 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:03:28.246 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:28.247 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:28.248 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:28.249 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:28.249 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:03:28.250 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:28.251 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:28.252 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:28.252 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:28.253 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:28.253 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:03:28.255 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:28.255 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:28.256 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:28.257 -05:00 [DBG] The request has model state errors, returning an error response.
2023-07-21 10:03:28.258 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-07-21 10:03:28.259 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:03:28.260 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-07-21 10:03:28.261 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-07-21 10:03:28.262 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-07-21 10:03:28.263 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 15.6123ms
2023-07-21 10:03:28.263 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:28.264 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - - - 400 272 application/problem+json;+charset=utf-8 31.8995ms
2023-07-21 10:03:37.757 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest/{pointofinterestid} - -
2023-07-21 10:03:37.757 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:03:37.758 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v1/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:37.760 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v1/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:37.768 -05:00 [INF] Multiple candidate actions were found, but none matched the requested service API version '1'. Candidate actions: CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)
2023-07-21 10:03:37.770 -05:00 [DBG] Request matched endpoint 'null'
2023-07-21 10:03:37.771 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:03:37.772 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:03:37.772 -05:00 [INF] Executing endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 10:03:37.775 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:03:37.777 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:03:37.777 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:03:37.778 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[<>f__AnonymousType1`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]], Microsoft.AspNetCore.Mvc.Versioning, Version=5.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2023-07-21 10:03:37.783 -05:00 [INF] Executed endpoint 'Microsoft.AspNetCore.Http.Endpoint'
2023-07-21 10:03:37.791 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v1/cities/1/pointsofinterest/{pointofinterestid} - - - 400 239 application/json;+charset=utf-8 34.0059ms
2023-07-21 10:03:42.173 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - -
2023-07-21 10:03:42.174 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:03:42.174 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:42.176 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:03:42.177 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:42.177 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:03:42.178 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:03:42.178 -05:00 [DBG] Authorization was successful.
2023-07-21 10:03:42.179 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:42.179 -05:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:03:42.180 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:03:42.181 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:03:42.181 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:42.183 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:03:42.184 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:03:42.184 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:42.185 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:03:42.186 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:42.186 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:03:42.187 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:42.188 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:42.188 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:03:42.189 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:03:42.189 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:42.190 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:03:42.191 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:42.193 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:03:42.194 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:03:42.194 -05:00 [DBG] The request has model state errors, returning an error response.
2023-07-21 10:03:42.195 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-07-21 10:03:42.195 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:03:42.196 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-07-21 10:03:42.198 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-07-21 10:03:42.198 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-07-21 10:03:42.199 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 14.4254ms
2023-07-21 10:03:42.200 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:03:42.200 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} - - - 400 272 application/problem+json;+charset=utf-8 27.6814ms
2023-07-21 10:04:33.686 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 10:04:33.816 -05:00 [DBG] Hosting starting
2023-07-21 10:04:33.854 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 10:04:33.858 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 10:04:33.862 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 10:04:33.867 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 10:04:33.870 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 10:04:33.878 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 10:04:33.880 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 10:04:33.882 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 10:04:33.884 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 10:04:33.888 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 10:04:33.890 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 10:04:33.893 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 10:04:33.894 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 10:04:34.035 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 10:04:34.100 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 10:04:34.101 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 10:04:34.102 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 10:04:34.102 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 10:04:34.103 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 10:04:34.103 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 10:04:34.104 -05:00 [INF] Hosting environment: Development
2023-07-21 10:04:34.104 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 10:04:34.105 -05:00 [DBG] Hosting started
2023-07-21 10:04:34.350 -05:00 [DBG] Connection id "0HMS9VF5KKMHU" received FIN.
2023-07-21 10:04:34.359 -05:00 [DBG] Connection id "0HMS9VF5KKMHU" accepted.
2023-07-21 10:04:34.361 -05:00 [DBG] Connection id "0HMS9VF5KKMHU" started.
2023-07-21 10:04:34.377 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 10:04:34.417 -05:00 [DBG] Connection id "0HMS9VF5KKMHU" stopped.
2023-07-21 10:04:34.421 -05:00 [DBG] Connection id "0HMS9VF5KKMHU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 10:04:35.324 -05:00 [DBG] Connection id "0HMS9VF5KKMHV" accepted.
2023-07-21 10:04:35.340 -05:00 [DBG] Connection id "0HMS9VF5KKMHV" started.
2023-07-21 10:04:35.412 -05:00 [DBG] Connection 0HMS9VF5KKMHV established using the following protocol: "Tls12"
2023-07-21 10:04:35.452 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 10:04:35.481 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 10:04:35.577 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 10:04:35.744 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 10:04:35.748 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 299.3340ms
2023-07-21 10:04:35.749 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 10:04:35.749 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 10:04:35.759 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 10.2045ms
2023-07-21 10:04:35.767 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.6124ms
2023-07-21 10:04:35.852 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 10:04:36.008 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 155.7949ms
2023-07-21 10:04:47.723 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json 50
2023-07-21 10:04:47.726 -05:00 [DBG] POST requests are not supported
2023-07-21 10:04:47.747 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 10:04:47.750 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 10:04:47.762 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:04:47.826 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:04:47.829 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:04:47.844 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 10:04:47.846 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:04:47.847 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:04:47.848 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:04:47.849 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:04:47.849 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:04:47.851 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:04:47.852 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:04:47.855 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:04:47.857 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 10:04:47.859 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 10:04:47.860 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 10:04:47.866 -05:00 [DBG] Connection id "0HMS9VF5KKMHV", Request id "0HMS9VF5KKMHV:00000009": started reading request body.
2023-07-21 10:04:47.867 -05:00 [DBG] Connection id "0HMS9VF5KKMHV", Request id "0HMS9VF5KKMHV:00000009": done reading request body.
2023-07-21 10:04:47.980 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:04:47.981 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:04:47.982 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:04:47.989 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:04:48.057 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:04:48.156 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.3962ms.
2023-07-21 10:04:48.162 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:04:48.165 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:04:48.166 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:04:48.167 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 10:04:48.197 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 343.1618ms
2023-07-21 10:04:48.198 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:04:48.199 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json 50 - 200 299 application/json;+charset=utf-8 476.0801ms
2023-07-21 10:05:05.995 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/1 - -
2023-07-21 10:05:05.996 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:05:05.997 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:05:06.001 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:05:06.003 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:05:06.067 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:05:06.069 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:05:06.074 -05:00 [DBG] Authorization was successful.
2023-07-21 10:05:06.075 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:05:06.082 -05:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:05:06.084 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:05:06.084 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:05:06.085 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:05:06.086 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:05:06.087 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:05:06.088 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:05:06.205 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 10:05:06.357 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:05:06.359 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:05:06.361 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:05:06.362 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:05:06.363 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:05:06.363 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:05:06.364 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:05:06.365 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:05:06.365 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:05:06.366 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:05:06.367 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:05:06.369 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:05:06.369 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:05:06.385 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:05:10.654 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:05:10.698 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-07-21 10:05:10.938 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:05:10.993 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:05:11.054 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (58ms).
2023-07-21 10:05:11.067 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:05:11.083 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:05:11.098 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:05:11.127 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:05:11.138 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:05:11.145 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:05:11.149 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:05:11.153 -05:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-07-21 10:05:11.186 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:05:11.197 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:05:11.198 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:05:11.199 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:05:11.199 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:05:11.200 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:05:11.202 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:05:11.215 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:05:11.235 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:05:11.237 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:05:11.237 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:05:11.247 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4861.0089ms.
2023-07-21 10:05:11.248 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:05:11.249 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:05:11.250 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:05:11.250 -05:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-07-21 10:05:11.263 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 5175.3161ms
2023-07-21 10:05:11.265 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-07-21 10:05:11.269 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:05:11.272 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest/1 - - - 200 96 application/json;+charset=utf-8 5277.4324ms
2023-07-21 10:06:19.280 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} application/json-patch+json 59
2023-07-21 10:06:19.281 -05:00 [DBG] PUT requests are not supported
2023-07-21 10:06:19.281 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:06:19.282 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/v2/cities/1/pointsofinterest/{pointofinterestid}'
2023-07-21 10:06:19.283 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:06:19.286 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:06:19.286 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:06:19.287 -05:00 [DBG] Authorization was successful.
2023-07-21 10:06:19.288 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:06:19.292 -05:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForUpdateDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:06:19.293 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:06:19.294 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:06:19.295 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:06:19.296 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:06:19.297 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:06:19.298 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:06:19.304 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:06:19.305 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:06:19.306 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:06:19.306 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:06:19.307 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:06:19.307 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:06:19.308 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:06:19.308 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:06:19.309 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:06:19.311 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:06:19.312 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:06:19.313 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:06:19.313 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-07-21 10:06:19.314 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2023-07-21 10:06:19.315 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:06:19.315 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:06:19.316 -05:00 [DBG] Connection id "0HMS9VF5KKMHV", Request id "0HMS9VF5KKMHV:0000000D": started reading request body.
2023-07-21 10:06:19.316 -05:00 [DBG] Connection id "0HMS9VF5KKMHV", Request id "0HMS9VF5KKMHV:0000000D": done reading request body.
2023-07-21 10:06:19.318 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-07-21 10:06:19.319 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-07-21 10:06:19.319 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-07-21 10:06:19.321 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-07-21 10:06:19.321 -05:00 [DBG] The request has model state errors, returning an error response.
2023-07-21 10:06:19.322 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-07-21 10:06:19.323 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:06:19.324 -05:00 [DBG] No information found on request to perform content negotiation.
2023-07-21 10:06:19.325 -05:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-07-21 10:06:19.326 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-07-21 10:06:19.327 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-07-21 10:06:19.355 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API) in 56.9038ms
2023-07-21 10:06:19.356 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:06:19.357 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7279/api/v2/cities/1/pointsofinterest/{pointofinterestid} application/json-patch+json 59 - 400 272 application/problem+json;+charset=utf-8 77.1673ms
2023-07-21 10:06:46.895 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-07-21 10:06:47.033 -05:00 [DBG] Hosting starting
2023-07-21 10:06:47.093 -05:00 [INF] User profile is available. Using 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-07-21 10:06:47.098 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-ca25f47f-a659-4aa6-b9dd-39ea12288c26.xml'.
2023-07-21 10:06:47.105 -05:00 [DBG] Reading data from file 'C:\Users\NBauman\AppData\Local\ASP.NET\DataProtection-Keys\key-e4ddd7c8-4411-483e-a179-dfa2414af8d9.xml'.
2023-07-21 10:06:47.111 -05:00 [DBG] Found key {ca25f47f-a659-4aa6-b9dd-39ea12288c26}.
2023-07-21 10:06:47.116 -05:00 [DBG] Found key {e4ddd7c8-4411-483e-a179-dfa2414af8d9}.
2023-07-21 10:06:47.125 -05:00 [DBG] Considering key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} with expiration date 2023-08-17 19:01:52Z as default key.
2023-07-21 10:06:47.127 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 10:06:47.131 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-07-21 10:06:47.133 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.29.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-07-21 10:06:47.137 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-07-21 10:06:47.140 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-07-21 10:06:47.143 -05:00 [DBG] Using key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} as the default key.
2023-07-21 10:06:47.145 -05:00 [DBG] Key ring with default key {ca25f47f-a659-4aa6-b9dd-39ea12288c26} was loaded during application startup.
2023-07-21 10:06:47.279 -05:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 4A9F350AB011E53CB6A0921AC103B7068BBCC07F)
2023-07-21 10:06:47.347 -05:00 [INF] Now listening on: https://localhost:7279
2023-07-21 10:06:47.348 -05:00 [INF] Now listening on: http://localhost:5279
2023-07-21 10:06:47.348 -05:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-07-21 10:06:47.349 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-07-21 10:06:47.349 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-07-21 10:06:47.350 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-07-21 10:06:47.350 -05:00 [INF] Hosting environment: Development
2023-07-21 10:06:47.351 -05:00 [INF] Content root path: C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\
2023-07-21 10:06:47.352 -05:00 [DBG] Hosting started
2023-07-21 10:06:47.632 -05:00 [DBG] Connection id "0HMS9VGDBN4GK" received FIN.
2023-07-21 10:06:47.657 -05:00 [DBG] Connection id "0HMS9VGDBN4GK" accepted.
2023-07-21 10:06:47.659 -05:00 [DBG] Connection id "0HMS9VGDBN4GK" started.
2023-07-21 10:06:47.671 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 10:06:47.703 -05:00 [DBG] Connection id "0HMS9VGDBN4GK" stopped.
2023-07-21 10:06:47.708 -05:00 [DBG] Connection id "0HMS9VGDBN4GK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 10:06:48.610 -05:00 [DBG] Connection id "0HMS9VGDBN4GL" accepted.
2023-07-21 10:06:48.611 -05:00 [DBG] Connection id "0HMS9VGDBN4GL" started.
2023-07-21 10:06:48.692 -05:00 [DBG] Connection 0HMS9VGDBN4GL established using the following protocol: "Tls12"
2023-07-21 10:06:48.730 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/index.html - -
2023-07-21 10:06:48.757 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-07-21 10:06:48.865 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-07-21 10:06:49.006 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-07-21 10:06:49.014 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_vs/browserLink - -
2023-07-21 10:06:49.014 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - -
2023-07-21 10:06:49.017 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/index.html - - - 200 - text/html;charset=utf-8 290.0970ms
2023-07-21 10:06:49.025 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_framework/aspnetcore-browser-refresh.js - - - 200 11994 application/javascript;+charset=utf-8 11.1992ms
2023-07-21 10:06:49.031 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.4304ms
2023-07-21 10:06:49.112 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - -
2023-07-21 10:06:49.271 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 158.2673ms
2023-07-21 10:07:00.137 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 10:07:00.140 -05:00 [DBG] POST requests are not supported
2023-07-21 10:07:00.163 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 10:07:00.167 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 10:07:00.178 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:07:00.242 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:07:00.245 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:07:00.261 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 10:07:00.263 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:07:00.264 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:07:00.265 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:07:00.266 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:07:00.267 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:07:00.268 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:07:00.269 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:07:00.273 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:07:00.274 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 10:07:00.276 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:07:00.276 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:07:00.283 -05:00 [DBG] Connection id "0HMS9VGDBN4GL", Request id "0HMS9VGDBN4GL:00000009": started reading request body.
2023-07-21 10:07:00.284 -05:00 [DBG] Connection id "0HMS9VGDBN4GL", Request id "0HMS9VGDBN4GL:00000009": done reading request body.
2023-07-21 10:07:00.398 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:07:00.398 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:07:00.399 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:07:00.405 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:07:00.474 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:07:00.573 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 94.2654ms.
2023-07-21 10:07:00.577 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:07:00.582 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:07:00.583 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:07:00.583 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 10:07:00.614 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 342.197ms
2023-07-21 10:07:00.615 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:07:00.615 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 478.9457ms
2023-07-21 10:07:42.116 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7279/api/v2/cities/1/pointsofinterest/1 application/json-patch+json 59
2023-07-21 10:07:42.123 -05:00 [DBG] PUT requests are not supported
2023-07-21 10:07:42.124 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:07:42.127 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:07:42.128 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:07:42.202 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:07:42.203 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:07:42.208 -05:00 [DBG] Authorization was successful.
2023-07-21 10:07:42.209 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:07:42.217 -05:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForUpdateDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:07:42.218 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:07:42.219 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:07:42.220 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:07:42.222 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:07:42.223 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:07:42.224 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:07:42.334 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-07-21 10:07:42.485 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:07:42.486 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:07:42.486 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:07:42.488 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:07:42.488 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:07:42.489 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:07:42.490 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:07:42.490 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:07:42.491 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:07:42.491 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:07:42.492 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:07:42.493 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:07:42.493 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:07:42.494 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-07-21 10:07:42.494 -05:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2023-07-21 10:07:42.495 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:07:42.496 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:07:42.497 -05:00 [DBG] Connection id "0HMS9VGDBN4GL", Request id "0HMS9VGDBN4GL:0000000B": started reading request body.
2023-07-21 10:07:42.497 -05:00 [DBG] Connection id "0HMS9VGDBN4GL", Request id "0HMS9VGDBN4GL:0000000B": done reading request body.
2023-07-21 10:07:42.499 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-07-21 10:07:42.499 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-07-21 10:07:42.500 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-07-21 10:07:42.501 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-07-21 10:07:42.517 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:07:43.237 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:07:43.283 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-07-21 10:07:43.528 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:07:43.579 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:07:43.642 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-07-21 10:07:43.656 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:43.671 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:43.684 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:07:43.714 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:07:43.725 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:07:43.732 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:43.737 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:43.741 -05:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-07-21 10:07:43.777 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:07:43.790 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:07:43.790 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:07:43.791 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:43.792 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:43.793 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:07:43.794 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:07:43.808 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:43.829 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:07:43.830 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:43.831 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:43.844 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 10:07:43.847 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 10:07:43.859 -05:00 [DBG] The unchanged property 'PointOfInterest.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 10:07:43.870 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:43.875 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 10:07:43.893 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:43.894 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:43.898 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 10:07:43.903 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 10:07:43.944 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:07:43.945 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-07-21 10:07:43.947 -05:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointOfInterest" SET "Description" = @p0
WHERE "Id" = @p1;
SELECT changes();
2023-07-21 10:07:43.950 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointOfInterest" SET "Description" = @p0
WHERE "Id" = @p1;
SELECT changes();
2023-07-21 10:07:43.956 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:07:43.962 -05:00 [DBG] Committing transaction.
2023-07-21 10:07:43.967 -05:00 [DBG] Committed transaction.
2023-07-21 10:07:43.972 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:43.973 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:43.976 -05:00 [DBG] Disposing transaction.
2023-07-21 10:07:43.983 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:43.986 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 10:07:43.987 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 1469.6554ms.
2023-07-21 10:07:43.992 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-07-21 10:07:43.993 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API) in 1768.8029ms
2023-07-21 10:07:43.994 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:07:43.999 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:07:44.002 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7279/api/v2/cities/1/pointsofinterest/1 application/json-patch+json 59 - 204 - - 1886.3558ms
2023-07-21 10:07:56.039 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 10:07:56.040 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:07:56.042 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:07:56.043 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:07:56.044 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:07:56.046 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:07:56.047 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:07:56.048 -05:00 [DBG] Authorization was successful.
2023-07-21 10:07:56.048 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:07:56.051 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:07:56.052 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:07:56.053 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:07:56.053 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:07:56.055 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:07:56.056 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:07:56.057 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:07:56.065 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:07:56.066 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:07:56.066 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:07:56.067 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:07:56.068 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:07:56.068 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:07:56.069 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:07:56.083 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:07:56.129 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:07:56.132 -05:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-07-21 10:07:56.139 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-07-21 10:07:56.140 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:07:56.141 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:07:56.141 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:56.142 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:56.142 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:07:56.143 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:07:56.145 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:07:56.145 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:56.146 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:56.149 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:07:56.150 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:07:56.151 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:56.151 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:56.152 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:07:56.153 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:07:56.154 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:07:56.154 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:56.155 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:56.160 -05:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2023-07-21 10:07:56.162 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-07-21 10:07:56.164 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:07:56.165 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:07:56.165 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:56.166 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:56.167 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:07:56.168 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:07:56.169 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.169 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.170 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.171 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.172 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.172 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.173 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.173 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.174 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:07:56.174 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:07:56.175 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:07:56.175 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:07:56.185 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.476ms.
2023-07-21 10:07:56.185 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:07:56.187 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-07-21 10:07:56.188 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-07-21 10:07:56.189 -05:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-07-21 10:07:56.189 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 131.8121ms
2023-07-21 10:07:56.190 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:07:56.190 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:07:56.191 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 406 0 - 152.2292ms
2023-07-21 10:08:00.035 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 10:08:00.036 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:08:00.037 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:08:00.038 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:08:00.038 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:08:00.039 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:08:00.040 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:08:00.040 -05:00 [DBG] Authorization was successful.
2023-07-21 10:08:00.041 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:08:00.042 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:08:00.043 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:08:00.043 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:08:00.044 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:08:00.045 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:08:00.046 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:08:00.048 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:08:00.050 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:08:00.051 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:08:00.051 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:08:00.052 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:08:00.053 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:08:00.053 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:08:00.054 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:08:00.068 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:08:00.105 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:08:00.108 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:08:00.109 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:08:00.110 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:08:00.110 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:08:00.111 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:08:00.112 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:08:00.113 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:08:00.114 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:08:00.114 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:08:00.115 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:08:00.116 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:08:00.116 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:08:00.117 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:08:00.118 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:08:00.119 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:08:00.120 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:08:00.120 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:08:00.121 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:08:00.122 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:08:00.123 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:08:00.123 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:08:00.124 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:08:00.125 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:08:00.127 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:08:00.129 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.130 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.131 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.132 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.133 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.134 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.135 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.135 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.136 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:08:00.136 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:08:00.137 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:08:00.138 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:08:00.139 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.0014ms.
2023-07-21 10:08:00.140 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:08:00.141 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:08:00.142 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:08:00.142 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 10:08:00.162 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 114.5629ms
2023-07-21 10:08:00.164 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:08:00.165 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:08:00.166 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 200 543 application/json;+charset=utf-8 130.5154ms
2023-07-21 10:09:18.611 -05:00 [DBG] Connection id "0HMS9VGDBN4GM" accepted.
2023-07-21 10:09:18.617 -05:00 [DBG] Connection id "0HMS9VGDBN4GM" received FIN.
2023-07-21 10:09:18.618 -05:00 [DBG] Connection id "0HMS9VGDBN4GM" started.
2023-07-21 10:09:18.618 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" accepted.
2023-07-21 10:09:18.633 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-07-21 10:09:18.633 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" started.
2023-07-21 10:09:18.635 -05:00 [DBG] Connection id "0HMS9VGDBN4GM" stopped.
2023-07-21 10:09:18.635 -05:00 [DBG] Connection id "0HMS9VGDBN4GM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-07-21 10:09:18.641 -05:00 [DBG] Connection 0HMS9VGDBN4GN established using the following protocol: "Tls12"
2023-07-21 10:09:18.650 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101
2023-07-21 10:09:18.651 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:09:18.651 -05:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterest/1'
2023-07-21 10:09:18.652 -05:00 [DBG] Request did not match any endpoints
2023-07-21 10:09:18.652 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:09:18.654 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:09:18.654 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101 - 404 0 - 4.3475ms
2023-07-21 10:09:18.655 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000002": started reading request body.
2023-07-21 10:09:18.656 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000002": done reading request body.
2023-07-21 10:09:32.549 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101
2023-07-21 10:09:32.550 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:09:32.550 -05:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterest/1'
2023-07-21 10:09:32.551 -05:00 [DBG] Request did not match any endpoints
2023-07-21 10:09:32.551 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:09:32.552 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:09:32.552 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101 - 404 0 - 3.0716ms
2023-07-21 10:09:32.553 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000003": started reading request body.
2023-07-21 10:09:32.553 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000003": done reading request body.
2023-07-21 10:10:16.065 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50
2023-07-21 10:10:16.079 -05:00 [DBG] POST requests are not supported
2023-07-21 10:10:16.080 -05:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-07-21 10:10:16.080 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-07-21 10:10:16.081 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:10:16.082 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:10:16.083 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:10:16.084 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:10:16.084 -05:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-07-21 10:10:16.085 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:10:16.086 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:10:16.086 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:10:16.087 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:10:16.088 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:10:16.092 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:10:16.093 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-07-21 10:10:16.094 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:10:16.094 -05:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-07-21 10:10:16.095 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:10:16.096 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-07-21 10:10:16.096 -05:00 [DBG] Connection id "0HMS9VGDBN4GL", Request id "0HMS9VGDBN4GL:00000011": started reading request body.
2023-07-21 10:10:16.097 -05:00 [DBG] Connection id "0HMS9VGDBN4GL", Request id "0HMS9VGDBN4GL:00000011": done reading request body.
2023-07-21 10:10:16.097 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:10:16.098 -05:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:10:16.099 -05:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-07-21 10:10:16.100 -05:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-07-21 10:10:16.115 -05:00 [INF] Executing action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:10:16.116 -05:00 [INF] Executed action method CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.1646ms.
2023-07-21 10:10:16.117 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:10:16.118 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:10:16.119 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:10:16.120 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-07-21 10:10:16.120 -05:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 28.0796ms
2023-07-21 10:10:16.122 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-07-21 10:10:16.122 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7279/api/authentication/authenticate application/json-patch+json 50 - 200 299 application/json;+charset=utf-8 57.8102ms
2023-07-21 10:10:29.264 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101
2023-07-21 10:10:29.265 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:10:29.266 -05:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterest/1'
2023-07-21 10:10:29.267 -05:00 [DBG] Request did not match any endpoints
2023-07-21 10:10:29.267 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:10:29.268 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:10:29.268 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:10:29.269 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101 - 404 0 - 4.5942ms
2023-07-21 10:10:29.270 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000004": started reading request body.
2023-07-21 10:10:29.270 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000004": done reading request body.
2023-07-21 10:10:46.016 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101
2023-07-21 10:10:46.017 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:10:46.018 -05:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterest/1'
2023-07-21 10:10:46.018 -05:00 [DBG] Request did not match any endpoints
2023-07-21 10:10:46.019 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:10:46.019 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:10:46.020 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:10:46.020 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 101 - 404 0 - 4.5976ms
2023-07-21 10:10:46.021 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000005": started reading request body.
2023-07-21 10:10:46.021 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000005": done reading request body.
2023-07-21 10:11:58.742 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 206
2023-07-21 10:11:58.742 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:11:58.743 -05:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterest/1'
2023-07-21 10:11:58.744 -05:00 [DBG] Request did not match any endpoints
2023-07-21 10:11:58.744 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:11:58.745 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:11:58.745 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/cities/1/pointsofinterest/1 application/json 206 - 404 0 - 3.3642ms
2023-07-21 10:11:58.745 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000006": started reading request body.
2023-07-21 10:11:58.746 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000006": done reading request body.
2023-07-21 10:12:51.148 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/v2/cities/1/pointsofinterest/1 application/json 206
2023-07-21 10:12:51.155 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:12:51.155 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:12:51.156 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:12:51.157 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:12:51.157 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-07-21 10:12:51.158 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (New York City)
2023-07-21 10:12:51.164 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-07-21 10:12:51.164 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:12:51.165 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/v2/cities/1/pointsofinterest/1 application/json 206 - 401 0 - 17.6906ms
2023-07-21 10:12:51.165 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000007": started reading request body.
2023-07-21 10:12:51.167 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000007": done reading request body.
2023-07-21 10:13:02.598 -05:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7279/api/v2/cities/1/pointsofinterest/1 application/json 206
2023-07-21 10:13:02.598 -05:00 [DBG] PATCH requests are not supported
2023-07-21 10:13:02.599 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:13:02.599 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/v2/cities/1/pointsofinterest/1'
2023-07-21 10:13:02.600 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:13:02.600 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:13:02.601 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:13:02.601 -05:00 [DBG] Authorization was successful.
2023-07-21 10:13:02.602 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:13:02.605 -05:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:13:02.605 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:13:02.606 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:13:02.607 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:02.608 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:13:02.609 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:02.612 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:02.613 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:02.613 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:02.614 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:13:02.614 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:02.615 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:02.616 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:02.616 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:02.617 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:13:02.617 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:13:02.618 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:13:02.618 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:13:02.619 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:13:02.620 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:13:02.621 -05:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2023-07-21 10:13:02.621 -05:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' using the name '' in request data ...
2023-07-21 10:13:02.622 -05:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-07-21 10:13:02.623 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-07-21 10:13:02.624 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000008": started reading request body.
2023-07-21 10:13:02.624 -05:00 [DBG] Connection id "0HMS9VGDBN4GN", Request id "0HMS9VGDBN4GN:00000008": done reading request body.
2023-07-21 10:13:02.650 -05:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2023-07-21 10:13:02.651 -05:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2023-07-21 10:13:02.652 -05:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2023-07-21 10:13:02.653 -05:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2023-07-21 10:13:02.684 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:13:02.686 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:13:02.689 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:02.690 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:02.690 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:02.691 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:02.691 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:02.692 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:02.693 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:02.694 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:02.694 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:02.695 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:02.696 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:02.696 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:02.697 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:02.698 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:13:02.699 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:13:02.700 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:02.700 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:02.701 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:02.702 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:02.710 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 10:13:02.710 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 10:13:02.711 -05:00 [DBG] The unchanged property 'PointOfInterest.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 10:13:02.712 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:02.713 -05:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-07-21 10:13:02.714 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 10:13:02.714 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:02.715 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:02.715 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 10:13:02.716 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 10:13:02.716 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:02.717 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:02.718 -05:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 21), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-07-21 10:13:02.719 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 21), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-07-21 10:13:02.721 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:02.721 -05:00 [DBG] Committing transaction.
2023-07-21 10:13:02.735 -05:00 [DBG] Committed transaction.
2023-07-21 10:13:02.735 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:02.736 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:02.737 -05:00 [DBG] Disposing transaction.
2023-07-21 10:13:02.737 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:02.738 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 10:13:02.739 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 54.1915ms.
2023-07-21 10:13:02.740 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-07-21 10:13:02.740 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API) in 128.4679ms
2023-07-21 10:13:02.741 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-07-21 10:13:02.741 -05:00 [DBG] Connection id "0HMS9VGDBN4GN" completed keep alive response.
2023-07-21 10:13:02.742 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:13:02.742 -05:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7279/api/v2/cities/1/pointsofinterest/1 application/json 206 - 204 - - 144.8286ms
2023-07-21 10:13:11.402 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 10:13:11.411 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:13:11.411 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:13:11.412 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:13:11.413 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:13:11.413 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:13:11.414 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:13:11.414 -05:00 [DBG] Authorization was successful.
2023-07-21 10:13:11.415 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:13:11.415 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:13:11.417 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:13:11.417 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:13:11.418 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:11.419 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:13:11.420 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:11.421 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:11.422 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:11.422 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:11.423 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:13:11.423 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:11.424 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:11.425 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:11.425 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:11.439 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:13:11.440 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:13:11.441 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:11.442 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:11.442 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:11.443 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:11.443 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:13:11.445 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:13:11.447 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:11.448 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:11.448 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:11.449 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:11.449 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:11.450 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:11.451 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:11.451 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:11.452 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:11.454 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:11.454 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:11.455 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:11.456 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:11.456 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:11.457 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:11.457 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:11.458 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:13:11.459 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:13:11.460 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.460 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.462 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.463 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.463 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.464 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.465 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.465 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.466 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:11.466 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:11.467 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:11.467 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:11.468 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 28.1068ms.
2023-07-21 10:13:11.469 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:13:11.471 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:13:11.471 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:13:11.472 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 10:13:11.473 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 51.8799ms
2023-07-21 10:13:11.474 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:13:11.474 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:13:11.475 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 200 564 application/json;+charset=utf-8 74.1819ms
2023-07-21 10:13:29.532 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7279/api/v2/cities/1/pointsofinterest/13 - -
2023-07-21 10:13:29.540 -05:00 [DBG] DELETE requests are not supported
2023-07-21 10:13:29.541 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest/13'
2023-07-21 10:13:29.541 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/v2/cities/1/pointsofinterest/13'
2023-07-21 10:13:29.542 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-07-21 10:13:29.543 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:13:29.543 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:13:29.544 -05:00 [DBG] Authorization was successful.
2023-07-21 10:13:29.544 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-07-21 10:13:29.547 -05:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:13:29.548 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:13:29.549 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:13:29.549 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:29.550 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:13:29.551 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:29.553 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:29.553 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:29.554 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:29.555 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:13:29.555 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:29.556 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:29.557 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:29.557 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:29.558 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:13:29.559 -05:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-07-21 10:13:29.559 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:13:29.560 -05:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:13:29.561 -05:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-07-21 10:13:29.561 -05:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-07-21 10:13:29.576 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:13:29.578 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:13:29.579 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:29.579 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:29.580 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:29.581 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:29.581 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:29.583 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:29.584 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:29.585 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:29.585 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:29.586 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:29.587 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:29.588 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:29.588 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:29.589 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:13:29.590 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-07-21 10:13:29.591 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:29.592 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:29.592 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:29.593 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:29.597 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:29.601 -05:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-07-21 10:13:29.601 -05:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-07-21 10:13:29.602 -05:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-07-21 10:13:29.603 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:29.603 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:29.604 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-07-21 10:13:29.605 -05:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-07-21 10:13:29.615 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:29.616 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:29.616 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-07-21 10:13:29.618 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-07-21 10:13:29.619 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:29.619 -05:00 [DBG] Committing transaction.
2023-07-21 10:13:29.629 -05:00 [DBG] Committed transaction.
2023-07-21 10:13:29.630 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:29.631 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:29.632 -05:00 [DBG] Disposing transaction.
2023-07-21 10:13:29.638 -05:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:29.639 -05:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-07-21 10:13:29.640 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 63.7708ms.
2023-07-21 10:13:29.641 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-07-21 10:13:29.642 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 89.2728ms
2023-07-21 10:13:29.643 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-07-21 10:13:29.643 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:13:29.644 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7279/api/v2/cities/1/pointsofinterest/13 - - - 204 - - 112.0858ms
2023-07-21 10:13:43.208 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - -
2023-07-21 10:13:43.209 -05:00 [DBG] The request path  does not match the path filter
2023-07-21 10:13:43.210 -05:00 [DBG] 1 candidate(s) found for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:13:43.211 -05:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/v{version:apiVersion}/cities/{cityId}/pointsofinterest' is valid for the request path '/api/v2/cities/1/pointsofinterest'
2023-07-21 10:13:43.212 -05:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:13:43.213 -05:00 [DBG] Successfully validated the token.
2023-07-21 10:13:43.213 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-07-21 10:13:43.214 -05:00 [DBG] Authorization was successful.
2023-07-21 10:13:43.215 -05:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:13:43.215 -05:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-07-21 10:13:43.217 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-07-21 10:13:43.217 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-07-21 10:13:43.218 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:43.220 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-07-21 10:13:43.221 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2023-07-21 10:13:43.222 -05:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:43.224 -05:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-07-21 10:13:43.225 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:43.225 -05:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-07-21 10:13:43.226 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:43.227 -05:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:43.228 -05:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-07-21 10:13:43.229 -05:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-07-21 10:13:43.243 -05:00 [INF] Executing action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) - Validation state: "Valid"
2023-07-21 10:13:43.244 -05:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-07-21 10:13:43.246 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:43.247 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:43.248 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:43.248 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:43.249 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:13:43.251 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-07-21 10:13:43.253 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:43.254 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:43.255 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:43.256 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:43.256 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:43.257 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:43.258 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:43.259 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:43.260 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-07-21 10:13:43.261 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:43.262 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:43.263 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:43.264 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-07-21 10:13:43.264 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-07-21 10:13:43.265 -05:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:43.266 -05:00 [DBG] Opened connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:43.267 -05:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:13:43.268 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-07-21 10:13:43.270 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.271 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.271 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.272 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.273 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.274 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.275 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.276 -05:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-07-21 10:13:43.276 -05:00 [DBG] A data reader was disposed.
2023-07-21 10:13:43.277 -05:00 [DBG] Closing connection to database 'main' on server 'C:\Users\NBauman\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2023-07-21 10:13:43.278 -05:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-07-21 10:13:43.279 -05:00 [INF] Executed action method CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.4638ms.
2023-07-21 10:13:43.281 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-07-21 10:13:43.282 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-07-21 10:13:43.283 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-07-21 10:13:43.284 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-07-21 10:13:43.285 -05:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 62.2946ms
2023-07-21 10:13:43.286 -05:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-07-21 10:13:43.286 -05:00 [DBG] 'CityInfoContext' disposed.
2023-07-21 10:13:43.287 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7279/api/v2/cities/1/pointsofinterest - - - 200 510 application/json;+charset=utf-8 79.5667ms
2023-07-21 10:13:47.947 -05:00 [DBG] Connection id "0HMS9VGDBN4GL" received FIN.
2023-07-21 10:13:47.949 -05:00 [DBG] Connection id "0HMS9VGDBN4GL" is closed. The last processed stream ID was 23.
2023-07-21 10:13:47.950 -05:00 [DBG] Connection id "0HMS9VGDBN4GL" sending FIN because: "The client closed the connection."
2023-07-21 10:13:47.959 -05:00 [DBG] Connection id "0HMS9VGDBN4GL" stopped.
